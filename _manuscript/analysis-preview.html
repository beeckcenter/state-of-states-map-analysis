<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
    <meta charset="utf-8">
    <meta name="generator" content="quarto-1.7.31">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

    <meta name="author" content="Elham Ali">
    <meta name="dcterms.date" content="2025-09-30">
    <meta name="keywords" content="civic tech, digital transformation, state government, map, research">

    <title>State of the States map analysis</title>
    <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      div.columns{display: flex; gap: min(4vw, 1.5em);}
      div.column{flex: auto; overflow-x: auto;}
      div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
      ul.task-list{list-style: none;}
      ul.task-list li input[type="checkbox"] {
        width: 0.8em;
        margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
        vertical-align: middle;
      }
      /* CSS for syntax highlighting */
      html { -webkit-text-size-adjust: 100%; }
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      .sourceCode { overflow: visible; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
        }
      pre.numberSource { margin-left: 3em;  padding-left: 4px; }
      div.sourceCode
        {   }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
    </style>

    <style>
      body.hypothesis-enabled #quarto-embed-header {
        padding-right: 36px;
      }

      #quarto-embed-header {
        height: 3em;
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: solid 1px;
      }

      #quarto-embed-header h6 {
        font-size: 1.1em;
        padding-top: 0.6em;
        margin-left: 1em;
        margin-right: 1em;
        font-weight: 400;
      }

      #quarto-embed-header a.quarto-back-link,
      #quarto-embed-header a.quarto-download-embed {
        font-size: 0.8em;
        margin-top: 1em;
        margin-bottom: 1em;
        margin-left: 1em;
        margin-right: 1em;
      }

      .quarto-back-container {
        padding-left: 0.5em;
        display: flex;
      }

      .headroom {
          will-change: transform;
          transition: transform 200ms linear;
      }

      .headroom--pinned {
          transform: translateY(0%);
      }

      .headroom--unpinned {
          transform: translateY(-100%);
      }      
    </style>

    <script>
    window.document.addEventListener("DOMContentLoaded", function () {

      var header = window.document.querySelector("#quarto-embed-header");
      const titleBannerEl = window.document.querySelector("body > #title-block-header");
      if (titleBannerEl) {
        titleBannerEl.style.paddingTop = header.clientHeight + "px";
      }
      const contentEl = window.document.getElementById('quarto-content');
      for (const child of contentEl.children) {
        child.style.paddingTop = header.clientHeight + "px";
        child.style.marginTop = "1em";
      }

      // Use the article root if the `back` call doesn't work. This isn't perfect
      // but should typically work
      window.quartoBackToArticle = () => {
        var currentUrl = window.location.href;
        window.history.back();
        setTimeout(() => {
            // if location was not changed in 100 ms, then there is no history back
            if(currentUrl === window.location.href){              
                // redirect to site root
                window.location.href = "index.html";
            }
        }, 100);
      }

      const headroom = new window.Headroom(header, {
        tolerance: 5,
        onPin: function () {
        },
        onUnpin: function () {
        },
      });
      headroom.init();
    });
    </script>

    
<script src="site_libs/manuscript-notebook/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-8a894fcc3cb5e37eb5bf30def131be2f.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
     <script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>  
      <meta name="citation_title" content="State of the States map analysis">
<meta name="citation_abstract" content="This analysis aims to explore trends of digital transformation, specifically on policy, chief data officers, digital service teams, impact reports, and design systems across U.S. states and territories.
">
<meta name="citation_keywords" content="civic tech,digital transformation,state government,map,research">
<meta name="citation_author" content="Elham Ali">
<meta name="citation_publication_date" content="2025-09-30">
<meta name="citation_cover_date" content="2025-09-30">
<meta name="citation_year" content="2025">
<meta name="citation_online_date" content="2025-09-30">
<meta name="citation_language" content="en">
<meta name="citation_journal_title" content="Beeck Center for Social Impact and Innovation">
<meta name="citation_reference" content="citation_title=13.2.4 google scholar results are limited to the 1000 most cited papers;,citation_author=Anne-Wil Harzing;,citation_publication_date=2025;,citation_cover_date=2025;,citation_year=2025;,citation_fulltext_html_url=https://harzing.com/popbook/ch13_2_4.htm;">
<meta name="citation_reference" content="citation_title=Stratified Sampling in R: A Practical Guide with Base R and dplyr  Steve’s Data Tips and Tricks;,citation_author=Steven Sanderson;,citation_publication_date=2024-07-29;,citation_cover_date=2024-07-29;,citation_year=2024;,citation_fulltext_html_url=https://www.spsanderson.com/steveondata/posts/2024-07-29/;,citation_language=en;">
</head>

  <body class="quarto-notebook quarto-light">
    <div id="quarto-embed-header" class="headroom fixed-top bg-primary">
      
      <a onclick="window.quartoBackToArticle(); return false;" class="btn btn-primary quarto-back-link" href=""><i class="bi bi-caret-left"></i> Back to Article</a>
      <h6><i class="bi bi-journal-code"></i> Article Notebook</h6>

            <a href="./analysis.qmd" class="btn btn-primary quarto-download-embed" download="analysis.qmd">Download Source</a>
          </div>

     <header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">State of the States map analysis</h1>
          </div>

    
    <div class="quarto-title-meta-container">
      <div class="quarto-title-meta-column-start">
            <div class="quarto-title-meta-author">
          <div class="quarto-title-meta-heading">Author</div>
          <div class="quarto-title-meta-heading">Affiliation</div>
          
                <div class="quarto-title-meta-contents">
            <p class="author">Elham Ali </p>
          </div>
                <div class="quarto-title-meta-contents">
                    <p class="affiliation">
                        Beeck Center for Social Impact and Innovation at Georgetown University
                      </p>
                  </div>
                    </div>
        
        <div class="quarto-title-meta">

                      
                <div>
            <div class="quarto-title-meta-heading">Published</div>
            <div class="quarto-title-meta-contents">
              <p class="date">September 30, 2025</p>
            </div>
          </div>
          
                
              </div>
      </div>
      <div class="quarto-title-meta-column-end quarto-other-formats-target">
      </div>
    </div>

    <div>
      <div class="abstract">
        <div class="block-title">Abstract</div>
        <p>This analysis aims to explore trends of digital transformation, specifically on policy, chief data officers, digital service teams, impact reports, and design systems across U.S. states and territories.</p>
      </div>
    </div>

    <div>
      <div class="keywords">
        <div class="block-title">Keywords</div>
        <p>civic tech, digital transformation, state government, map, research</p>
      </div>
    </div>

    <div class="quarto-other-links-text-target">
    </div>  </div>
</header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#background" id="toc-background" class="nav-link active" data-scroll-target="#background">Background</a></li>
  <li><a href="#questions" id="toc-questions" class="nav-link" data-scroll-target="#questions">Questions</a></li>
  <li><a href="#data-sources" id="toc-data-sources" class="nav-link" data-scroll-target="#data-sources">Data Sources</a></li>
  <li><a href="#cleaning" id="toc-cleaning" class="nav-link" data-scroll-target="#cleaning">Cleaning</a>
  <ul>
  <li><a href="#import-raw-data" id="toc-import-raw-data" class="nav-link" data-scroll-target="#import-raw-data">Import raw data</a></li>
  <li><a href="#clean-both-datasets" id="toc-clean-both-datasets" class="nav-link" data-scroll-target="#clean-both-datasets">Clean both datasets</a></li>
  </ul></li>
  <li><a href="#analysis" id="toc-analysis" class="nav-link" data-scroll-target="#analysis">Analysis</a>
  <ul>
  <li><a href="#q1" id="toc-q1" class="nav-link" data-scroll-target="#q1">Q1</a></li>
  <li><a href="#q2" id="toc-q2" class="nav-link" data-scroll-target="#q2">Q2</a></li>
  <li><a href="#q3" id="toc-q3" class="nav-link" data-scroll-target="#q3">Q3</a></li>
  <li><a href="#q4" id="toc-q4" class="nav-link" data-scroll-target="#q4">Q4</a></li>
  <li><a href="#q5" id="toc-q5" class="nav-link" data-scroll-target="#q5">Q5</a></li>
  <li><a href="#q6" id="toc-q6" class="nav-link" data-scroll-target="#q6">Q6</a></li>
  <li><a href="#q7" id="toc-q7" class="nav-link" data-scroll-target="#q7">Q7</a></li>
  <li><a href="#q8" id="toc-q8" class="nav-link" data-scroll-target="#q8">Q8</a></li>
  <li><a href="#q9" id="toc-q9" class="nav-link" data-scroll-target="#q9">Q9</a></li>
  <li><a href="#q10" id="toc-q10" class="nav-link" data-scroll-target="#q10">Q10</a></li>
  <li><a href="#q11" id="toc-q11" class="nav-link" data-scroll-target="#q11">Q11</a></li>
  <li><a href="#q12" id="toc-q12" class="nav-link" data-scroll-target="#q12">Q12</a></li>
  <li><a href="#q13" id="toc-q13" class="nav-link" data-scroll-target="#q13">Q13</a></li>
  </ul></li>
  <li><a href="#export-all-insights" id="toc-export-all-insights" class="nav-link" data-scroll-target="#export-all-insights">Export all insights</a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">      

       <section id="background" class="level2">
<h2 class="anchored" data-anchor-id="background">Background</h2>
<p>When public climate &amp; EJ evidence disappears (removed, restricted, or altered), a decade of downstream knowledge becomes harder to verify, reproduce, teach, or apply—especially for communities and decisions that most need it.<br>
This analysis looks at how many studies have used these tools, their topics, and their use cases.</p>
</section>
<section id="questions" class="level2">
<h2 class="anchored" data-anchor-id="questions">Questions</h2>
<p>Here are the key questions explored in this analysis:</p>
<ul>
<li><p>How many <strong>states/territories</strong> have at least one:</p>
<ul>
<li>Executive order</li>
<li>AI Legislation</li>
<li>Chief Data Officer (CDO)</li>
<li>Digital Service Team (DST)</li>
<li>Digital Service Impact Report</li>
<li>Design system</li>
</ul></li>
<li><p>Which states are the <strong>most active vs.&nbsp;least active</strong> across all categories?</p></li>
<li><p>Which states introduced <strong>CDOs or DSTs earliest</strong>, and how has that spread across regions?</p></li>
<li><p>Which states with <strong>active CDOs</strong> also have <strong>design systems</strong> or <strong>DSTs</strong>?</p></li>
<li><p>Are states with <strong>AI legislation</strong> more likely to have other forms of digital infrastructure (DST, design systems)?</p></li>
<li><p>In which region(s) do <strong>AI legislation policies cluster</strong> in?</p></li>
<li><p>What are the <strong>most common policy topics</strong> in executive orders (e.g., broadband, interoperability, AI)?</p></li>
<li><p>What are the <strong>most common policy topics</strong> in AI legislations orders (e.g., broadband, interoperability, AI)?</p></li>
<li><p>What is the <strong>trend over time</strong> in the number of executive orders and AI legislations enacted?</p></li>
<li><p>Do <strong>early adopters</strong> (states with policies from 2010–2015) differ from <strong>late adopters</strong> in 2020–2025?</p></li>
<li><p>Do certain AI legislation topics <strong>cluster in certain regions</strong>? Do certain executive topics topics cluster in certain regions?</p></li>
</ul>
</section>
<section id="data-sources" class="level2">
<h2 class="anchored" data-anchor-id="data-sources">Data Sources</h2>
<p>The climate tools assessed are:</p>
<ul>
<li>map_data</li>
<li>policy_data</li>
</ul>
<p>The data for this project comes from the Digital Service Network at the Beeck and last refreshed on September 30, 2025.</p>
<p>Original raw datasets are saved in the <code>data/</code> folder. This script reduces and cleans those datasets to prepare them for analysis.</p>
<hr>
</section>
<section id="cleaning" class="level2">
<h2 class="anchored" data-anchor-id="cleaning">Cleaning</h2>
<p>I start by loading the packages needed for file handling, data wrangling, and visualization.</p>
<div class="cell-container code-fold"><div class="cell-decorator"><pre>In [1]:</pre></div><div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Folder structure helpers</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>here() starts at /Users/elhamali/Documents/Data Projects/state-of-states-map-analysis</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ezknitr)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Data import &amp; cleaning</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.2     ✔ tibble    3.3.0
✔ lubridate 1.9.4     ✔ tidyr     1.3.1
✔ purrr     1.1.0     </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'janitor'

The following objects are masked from 'package:stats':

    chisq.test, fisher.test</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># library(rlang)</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Visualization</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(highcharter)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Registered S3 method overwritten by 'quantmod':
  method            from
  as.zoo.data.frame zoo </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'igraph'

The following objects are masked from 'package:lubridate':

    %--%, union

The following objects are masked from 'package:dplyr':

    as_data_frame, groups, union

The following objects are masked from 'package:purrr':

    compose, simplify

The following object is masked from 'package:tidyr':

    crossing

The following object is masked from 'package:tibble':

    as_data_frame

The following objects are masked from 'package:stats':

    decompose, spectrum

The following object is masked from 'package:base':

    union</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(htmlwidgets)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div></div>
<section id="import-raw-data" class="level3">
<h3 class="anchored" data-anchor-id="import-raw-data">Import raw data</h3>
<p>I import all .csv files from the <code>data/</code> folder, then save them as .rds files into <code>output/</code>. This preserves their structure and speeds up future reads.</p>
<div class="cell-container code-fold"><div class="cell-decorator"><pre>In [2]:</pre></div><div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># List all CSV files</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>csv_files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="fu">here</span>(<span class="st">"data"</span>), <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">.csv$"</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Read into a list of dataframes</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>datasets <span class="ot">&lt;-</span> <span class="fu">map</span>(csv_files, read.csv)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(datasets) <span class="ot">&lt;-</span> tools<span class="sc">::</span><span class="fu">file_path_sans_ext</span>(<span class="fu">basename</span>(csv_files))</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Save each dataset as .rds in output/</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="fu">walk2</span>(</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  datasets,</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(datasets),</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span> <span class="fu">saveRDS</span>(.x, <span class="fu">here</span>(<span class="st">"output"</span>, <span class="fu">paste0</span>(.y, <span class="st">".rds"</span>)))</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div></div>
</section>
<section id="clean-both-datasets" class="level3">
<h3 class="anchored" data-anchor-id="clean-both-datasets">Clean both datasets</h3>
<p>I apply the same cleaning process to both datasets (map_data and policy_data):</p>
<ul>
<li>Standardize variable names to snake_case</li>
<li>Guess variable types (integers, doubles, dates, etc.)</li>
<li>Convert responses for ‘executive_orders’, ‘ai_legislations’, ‘digital_service_teams’, ‘digital_service_impact_reports’
<ul>
<li>yes to 1</li>
<li>no to 0</li>
</ul></li>
<li>Convert responses for ‘design_systems’
<ul>
<li>yes to 1</li>
<li>in development to 1</li>
<li>no to 0</li>
<li>unverified to 0</li>
</ul></li>
<li>Convert responses for ‘chief_data_officers’
<ul>
<li>yes, state CDO to 1</li>
<li>yes, state CDO equivalent to 1</li>
<li>no to 0</li>
<li>no, vacant to 0</li>
<li>unverified to 0</li>
</ul></li>
<li>Add a region variable to classify the state’s based on CDC’s four regions <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>
<ul>
<li><strong>Northeast</strong>: Includes Connecticut, Maine, Massachusetts, New Hampshire, New Jersey, New York, Pennsylvania, Rhode Island, and Vermont</li>
<li><strong>Midwest</strong>: Includes Illinois, Indiana, Iowa, Kansas, Michigan, Minnesota, Missouri, Nebraska, North Dakota, Ohio, South Dakota, and Wisconsin</li>
<li><strong>South</strong>: Includes Alabama, Arkansas, Delaware, District of Columbia, Florida, Georgia, Kentucky, Louisiana, Maryland, Mississippi, North Carolina, Oklahoma, South Carolina, Tennessee, Texas, Virginia, and West Virginia</li>
<li><strong>West</strong>: Includes Alaska, Arizona, California, Colorado, Hawaii, Idaho, Montana, Nevada, New Mexico, Oregon, Utah, Washington, and Wyoming.</li>
<li><strong>Territories</strong>: Includes American Samoa, Guam, the Northern Mariana Islands, Puerto Rico, and the U.S. Virgin Islands (not included in CDC’s regional mapping, but I added here to include the territories)</li>
</ul></li>
</ul>
<div class="cell-container code-fold"><div class="cell-decorator"><pre>In [3]:</pre></div><div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># -------------------------------------------------------------------</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)   <span class="co"># includes dplyr, stringr, readr, etc.</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glue)</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'fs'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:igraph':

    path</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># -------------------------------------------------------------------</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Helper: read -&gt; clean names -&gt; guess types -&gt; trim</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>read_clean_tag <span class="ot">&lt;-</span> <span class="cf">function</span>(path) {</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">readRDS</span>(path) <span class="sc">|&gt;</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">|&gt;</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    readr<span class="sc">::</span><span class="fu">type_convert</span>(<span class="at">col_types =</span> readr<span class="sc">::</span><span class="fu">cols</span>(<span class="at">.default =</span> readr<span class="sc">::</span><span class="fu">col_guess</span>())) <span class="sc">|&gt;</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), <span class="sc">~</span> <span class="fu">trimws</span>(.x)))</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Core base cleaner (shared)</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>clean_base <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>    janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">|&gt;</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>    readr<span class="sc">::</span><span class="fu">type_convert</span>(<span class="at">col_types =</span> readr<span class="sc">::</span><span class="fu">cols</span>(<span class="at">.default =</span> readr<span class="sc">::</span><span class="fu">col_guess</span>())) <span class="sc">|&gt;</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), <span class="sc">~</span> <span class="fu">trimws</span>(.x)))</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="co"># -------------------------------------------------------------------</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Region mapping (CDC 4 regions + Territories) with robust normalization</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>add_region <span class="ot">&lt;-</span> <span class="cf">function</span>(df, <span class="at">state_col =</span> <span class="st">"state_territory"</span>) {</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>  norm <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>    x <span class="sc">|&gt;</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>      stringr<span class="sc">::</span><span class="fu">str_to_lower</span>() <span class="sc">|&gt;</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>      stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">"[[:punct:]]"</span>, <span class="st">" "</span>) <span class="sc">|&gt;</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>      stringr<span class="sc">::</span><span class="fu">str_squish</span>()</span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>  northeast <span class="ot">&lt;-</span> <span class="fu">norm</span>(<span class="fu">c</span>(</span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Connecticut"</span>,<span class="st">"Maine"</span>,<span class="st">"Massachusetts"</span>,<span class="st">"New Hampshire"</span>,<span class="st">"New Jersey"</span>,</span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>    <span class="st">"New York"</span>,<span class="st">"Pennsylvania"</span>,<span class="st">"Rhode Island"</span>,<span class="st">"Vermont"</span></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>  midwest <span class="ot">&lt;-</span> <span class="fu">norm</span>(<span class="fu">c</span>(</span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Illinois"</span>,<span class="st">"Indiana"</span>,<span class="st">"Iowa"</span>,<span class="st">"Kansas"</span>,<span class="st">"Michigan"</span>,<span class="st">"Minnesota"</span>,<span class="st">"Missouri"</span>,</span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Nebraska"</span>,<span class="st">"North Dakota"</span>,<span class="st">"Ohio"</span>,<span class="st">"South Dakota"</span>,<span class="st">"Wisconsin"</span></span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>  south <span class="ot">&lt;-</span> <span class="fu">norm</span>(<span class="fu">c</span>(</span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Alabama"</span>,<span class="st">"Arkansas"</span>,<span class="st">"Delaware"</span>,<span class="st">"District of Columbia"</span>,<span class="st">"Florida"</span>,<span class="st">"Georgia"</span>,</span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Kentucky"</span>,<span class="st">"Louisiana"</span>,<span class="st">"Maryland"</span>,<span class="st">"Mississippi"</span>,<span class="st">"North Carolina"</span>,<span class="st">"Oklahoma"</span>,</span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>    <span class="st">"South Carolina"</span>,<span class="st">"Tennessee"</span>,<span class="st">"Texas"</span>,<span class="st">"Virginia"</span>,<span class="st">"West Virginia"</span></span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a>  <span class="co"># DC aliases</span></span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a>  south <span class="ot">&lt;-</span> <span class="fu">unique</span>(<span class="fu">c</span>(south, <span class="fu">norm</span>(<span class="fu">c</span>(<span class="st">"Washington, D.C."</span>,<span class="st">"Washington D.C."</span>,<span class="st">"Washington DC"</span>,<span class="st">"DC"</span>))))</span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a>  west <span class="ot">&lt;-</span> <span class="fu">norm</span>(<span class="fu">c</span>(</span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Alaska"</span>,<span class="st">"Arizona"</span>,<span class="st">"California"</span>,<span class="st">"Colorado"</span>,<span class="st">"Hawaii"</span>,<span class="st">"Idaho"</span>,<span class="st">"Montana"</span>,<span class="st">"Nevada"</span>,</span>
<span id="cb17-46"><a href="#cb17-46" aria-hidden="true" tabindex="-1"></a>    <span class="st">"New Mexico"</span>,<span class="st">"Oregon"</span>,<span class="st">"Utah"</span>,<span class="st">"Washington"</span>,<span class="st">"Wyoming"</span></span>
<span id="cb17-47"><a href="#cb17-47" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb17-48"><a href="#cb17-48" aria-hidden="true" tabindex="-1"></a>  territories <span class="ot">&lt;-</span> <span class="fu">norm</span>(<span class="fu">c</span>(</span>
<span id="cb17-49"><a href="#cb17-49" aria-hidden="true" tabindex="-1"></a>    <span class="st">"American Samoa"</span>,<span class="st">"Guam"</span>,<span class="st">"Northern Mariana Islands"</span>,<span class="st">"Puerto Rico"</span>,</span>
<span id="cb17-50"><a href="#cb17-50" aria-hidden="true" tabindex="-1"></a>    <span class="st">"U.S. Virgin Islands"</span>,<span class="st">"US Virgin Islands"</span>,<span class="st">"Virgin Islands"</span></span>
<span id="cb17-51"><a href="#cb17-51" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb17-52"><a href="#cb17-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-53"><a href="#cb17-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Choose the state column (fallback to 'state' if needed)</span></span>
<span id="cb17-54"><a href="#cb17-54" aria-hidden="true" tabindex="-1"></a>  chosen_col <span class="ot">&lt;-</span></span>
<span id="cb17-55"><a href="#cb17-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (state_col <span class="sc">%in%</span> <span class="fu">names</span>(df)) state_col</span>
<span id="cb17-56"><a href="#cb17-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> (<span class="st">"state"</span> <span class="sc">%in%</span> <span class="fu">names</span>(df)) <span class="st">"state"</span></span>
<span id="cb17-57"><a href="#cb17-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> (<span class="st">"state_territory"</span> <span class="sc">%in%</span> <span class="fu">names</span>(df)) <span class="st">"state_territory"</span></span>
<span id="cb17-58"><a href="#cb17-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cn">NA_character_</span></span>
<span id="cb17-59"><a href="#cb17-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-60"><a href="#cb17-60" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.na</span>(chosen_col)) <span class="fu">return</span>(df)</span>
<span id="cb17-61"><a href="#cb17-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-62"><a href="#cb17-62" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb17-63"><a href="#cb17-63" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb17-64"><a href="#cb17-64" aria-hidden="true" tabindex="-1"></a>      <span class="at">.key =</span> <span class="fu">norm</span>(.data[[chosen_col]]),</span>
<span id="cb17-65"><a href="#cb17-65" aria-hidden="true" tabindex="-1"></a>      <span class="at">region =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb17-66"><a href="#cb17-66" aria-hidden="true" tabindex="-1"></a>        .key <span class="sc">%in%</span> northeast   <span class="sc">~</span> <span class="st">"Northeast"</span>,</span>
<span id="cb17-67"><a href="#cb17-67" aria-hidden="true" tabindex="-1"></a>        .key <span class="sc">%in%</span> midwest     <span class="sc">~</span> <span class="st">"Midwest"</span>,</span>
<span id="cb17-68"><a href="#cb17-68" aria-hidden="true" tabindex="-1"></a>        .key <span class="sc">%in%</span> south       <span class="sc">~</span> <span class="st">"South"</span>,</span>
<span id="cb17-69"><a href="#cb17-69" aria-hidden="true" tabindex="-1"></a>        .key <span class="sc">%in%</span> west        <span class="sc">~</span> <span class="st">"West"</span>,</span>
<span id="cb17-70"><a href="#cb17-70" aria-hidden="true" tabindex="-1"></a>        .key <span class="sc">%in%</span> territories <span class="sc">~</span> <span class="st">"Territories"</span>,</span>
<span id="cb17-71"><a href="#cb17-71" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb17-72"><a href="#cb17-72" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb17-73"><a href="#cb17-73" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb17-74"><a href="#cb17-74" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>.key)</span>
<span id="cb17-75"><a href="#cb17-75" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb17-76"><a href="#cb17-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-77"><a href="#cb17-77" aria-hidden="true" tabindex="-1"></a><span class="co"># -------------------------------------------------------------------</span></span>
<span id="cb17-78"><a href="#cb17-78" aria-hidden="true" tabindex="-1"></a><span class="co"># Exact recoding rules for specified columns</span></span>
<span id="cb17-79"><a href="#cb17-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-80"><a href="#cb17-80" aria-hidden="true" tabindex="-1"></a><span class="co"># yes/no -&gt; 1/0</span></span>
<span id="cb17-81"><a href="#cb17-81" aria-hidden="true" tabindex="-1"></a>recode_yes_no <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb17-82"><a href="#cb17-82" aria-hidden="true" tabindex="-1"></a>  xx <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_to_lower</span>(stringr<span class="sc">::</span><span class="fu">str_squish</span>(<span class="fu">as.character</span>(x)))</span>
<span id="cb17-83"><a href="#cb17-83" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb17-84"><a href="#cb17-84" aria-hidden="true" tabindex="-1"></a>    xx <span class="sc">==</span> <span class="st">"yes"</span> <span class="sc">~</span> <span class="dv">1</span>L,</span>
<span id="cb17-85"><a href="#cb17-85" aria-hidden="true" tabindex="-1"></a>    xx <span class="sc">==</span> <span class="st">"no"</span>  <span class="sc">~</span> <span class="dv">0</span>L,</span>
<span id="cb17-86"><a href="#cb17-86" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span>        <span class="sc">~</span> <span class="cn">NA_integer_</span></span>
<span id="cb17-87"><a href="#cb17-87" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb17-88"><a href="#cb17-88" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb17-89"><a href="#cb17-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-90"><a href="#cb17-90" aria-hidden="true" tabindex="-1"></a><span class="co"># design_systems: yes/in development -&gt; 1; no/unverified -&gt; 0</span></span>
<span id="cb17-91"><a href="#cb17-91" aria-hidden="true" tabindex="-1"></a>recode_design_systems <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb17-92"><a href="#cb17-92" aria-hidden="true" tabindex="-1"></a>  xx <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_to_lower</span>(stringr<span class="sc">::</span><span class="fu">str_squish</span>(<span class="fu">as.character</span>(x)))</span>
<span id="cb17-93"><a href="#cb17-93" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb17-94"><a href="#cb17-94" aria-hidden="true" tabindex="-1"></a>    xx <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"yes"</span>,<span class="st">"in development"</span>,<span class="st">"in-development"</span>,<span class="st">"in_development"</span>) <span class="sc">~</span> <span class="dv">1</span>L,</span>
<span id="cb17-95"><a href="#cb17-95" aria-hidden="true" tabindex="-1"></a>    xx <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"no"</span>,<span class="st">"unverified"</span>) <span class="sc">~</span> <span class="dv">0</span>L,</span>
<span id="cb17-96"><a href="#cb17-96" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_integer_</span></span>
<span id="cb17-97"><a href="#cb17-97" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb17-98"><a href="#cb17-98" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb17-99"><a href="#cb17-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-100"><a href="#cb17-100" aria-hidden="true" tabindex="-1"></a><span class="co"># chief_data_officers (CDO):</span></span>
<span id="cb17-101"><a href="#cb17-101" aria-hidden="true" tabindex="-1"></a><span class="co"># yes, state CDO / yes, state CDO equivalent -&gt; 1</span></span>
<span id="cb17-102"><a href="#cb17-102" aria-hidden="true" tabindex="-1"></a><span class="co"># no / no, vacant / unverified -&gt; 0</span></span>
<span id="cb17-103"><a href="#cb17-103" aria-hidden="true" tabindex="-1"></a>recode_cdo <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb17-104"><a href="#cb17-104" aria-hidden="true" tabindex="-1"></a>  xx <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_to_lower</span>(stringr<span class="sc">::</span><span class="fu">str_squish</span>(<span class="fu">as.character</span>(x)))</span>
<span id="cb17-105"><a href="#cb17-105" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb17-106"><a href="#cb17-106" aria-hidden="true" tabindex="-1"></a>    xx <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"yes, state cdo"</span>,<span class="st">"yes, state cdo equivalent"</span>) <span class="sc">~</span> <span class="dv">1</span>L,</span>
<span id="cb17-107"><a href="#cb17-107" aria-hidden="true" tabindex="-1"></a>    xx <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"no"</span>,<span class="st">"no, vacant"</span>,<span class="st">"unverified"</span>) <span class="sc">~</span> <span class="dv">0</span>L,</span>
<span id="cb17-108"><a href="#cb17-108" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_integer_</span></span>
<span id="cb17-109"><a href="#cb17-109" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb17-110"><a href="#cb17-110" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb17-111"><a href="#cb17-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-112"><a href="#cb17-112" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply recoding only to the specified columns if they exist</span></span>
<span id="cb17-113"><a href="#cb17-113" aria-hidden="true" tabindex="-1"></a>recode_specified_status_cols <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb17-114"><a href="#cb17-114" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb17-115"><a href="#cb17-115" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb17-116"><a href="#cb17-116" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb17-117"><a href="#cb17-117" aria-hidden="true" tabindex="-1"></a>        <span class="fu">intersect</span>(<span class="fu">c</span>(<span class="st">"executive_orders"</span>, <span class="st">"ai_legislations"</span>,</span>
<span id="cb17-118"><a href="#cb17-118" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"digital_service_teams"</span>, <span class="st">"digital_service_impact_reports"</span>),</span>
<span id="cb17-119"><a href="#cb17-119" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">names</span>(df)),</span>
<span id="cb17-120"><a href="#cb17-120" aria-hidden="true" tabindex="-1"></a>        recode_yes_no</span>
<span id="cb17-121"><a href="#cb17-121" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb17-122"><a href="#cb17-122" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb17-123"><a href="#cb17-123" aria-hidden="true" tabindex="-1"></a>        <span class="fu">intersect</span>(<span class="st">"design_systems"</span>, <span class="fu">names</span>(df)),</span>
<span id="cb17-124"><a href="#cb17-124" aria-hidden="true" tabindex="-1"></a>        recode_design_systems</span>
<span id="cb17-125"><a href="#cb17-125" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb17-126"><a href="#cb17-126" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb17-127"><a href="#cb17-127" aria-hidden="true" tabindex="-1"></a>        <span class="fu">intersect</span>(<span class="st">"chief_data_officers"</span>, <span class="fu">names</span>(df)),</span>
<span id="cb17-128"><a href="#cb17-128" aria-hidden="true" tabindex="-1"></a>        recode_cdo</span>
<span id="cb17-129"><a href="#cb17-129" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb17-130"><a href="#cb17-130" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb17-131"><a href="#cb17-131" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb17-132"><a href="#cb17-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-133"><a href="#cb17-133" aria-hidden="true" tabindex="-1"></a><span class="co"># -------------------------------------------------------------------</span></span>
<span id="cb17-134"><a href="#cb17-134" aria-hidden="true" tabindex="-1"></a><span class="co"># One canonical cleaner to use everywhere</span></span>
<span id="cb17-135"><a href="#cb17-135" aria-hidden="true" tabindex="-1"></a>clean_dataset <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb17-136"><a href="#cb17-136" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb17-137"><a href="#cb17-137" aria-hidden="true" tabindex="-1"></a>    <span class="fu">clean_base</span>() <span class="sc">|&gt;</span></span>
<span id="cb17-138"><a href="#cb17-138" aria-hidden="true" tabindex="-1"></a>    <span class="fu">recode_specified_status_cols</span>() <span class="sc">|&gt;</span></span>
<span id="cb17-139"><a href="#cb17-139" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_region</span>()</span>
<span id="cb17-140"><a href="#cb17-140" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb17-141"><a href="#cb17-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-142"><a href="#cb17-142" aria-hidden="true" tabindex="-1"></a><span class="co"># -------------------------------------------------------------------</span></span>
<span id="cb17-143"><a href="#cb17-143" aria-hidden="true" tabindex="-1"></a><span class="co"># Read raw RDS (from your earlier import step), clean, write outputs</span></span>
<span id="cb17-144"><a href="#cb17-144" aria-hidden="true" tabindex="-1"></a>map_raw    <span class="ot">&lt;-</span> <span class="fu">read_clean_tag</span>(<span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"map_data.rds"</span>))</span>
<span id="cb17-145"><a href="#cb17-145" aria-hidden="true" tabindex="-1"></a>policy_raw <span class="ot">&lt;-</span> <span class="fu">read_clean_tag</span>(<span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"policy_data.rds"</span>))</span>
<span id="cb17-146"><a href="#cb17-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-147"><a href="#cb17-147" aria-hidden="true" tabindex="-1"></a>map_clean    <span class="ot">&lt;-</span> <span class="fu">clean_dataset</span>(map_raw)</span>
<span id="cb17-148"><a href="#cb17-148" aria-hidden="true" tabindex="-1"></a>policy_clean <span class="ot">&lt;-</span> <span class="fu">clean_dataset</span>(policy_raw)</span>
<span id="cb17-149"><a href="#cb17-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-150"><a href="#cb17-150" aria-hidden="true" tabindex="-1"></a>fs<span class="sc">::</span><span class="fu">dir_create</span>(<span class="fu">here</span>(<span class="st">"output"</span>))</span>
<span id="cb17-151"><a href="#cb17-151" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_rds</span>(map_clean,    <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"map_data_clean.rds"</span>))</span>
<span id="cb17-152"><a href="#cb17-152" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_rds</span>(policy_clean, <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"policy_data_clean.rds"</span>))</span>
<span id="cb17-153"><a href="#cb17-153" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_csv</span>(map_clean,    <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"map_data_clean.csv"</span>), <span class="at">na =</span> <span class="st">""</span>)</span>
<span id="cb17-154"><a href="#cb17-154" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_csv</span>(policy_clean, <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"policy_data_clean.csv"</span>), <span class="at">na =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div></div>
<p>I’ll now assign the right variable types for the cleaned datasets.</p>
<div class="cell-container code-fold"><div class="cell-decorator"><pre>In [4]:</pre></div><div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co"># load inputs created earlier</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>map_data_clean    <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_rds</span>(<span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"map_data_clean.rds"</span>))</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>policy_data_clean <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_rds</span>(<span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"policy_data_clean.rds"</span>))</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>to_binary <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.logical</span>(x)) <span class="fu">return</span>(<span class="fu">as.integer</span>(x))</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.numeric</span>(x)) <span class="fu">return</span>(<span class="fu">as.integer</span>(x <span class="sc">==</span> <span class="dv">1</span>))</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  x_chr <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">trimws</span>(<span class="fu">as.character</span>(x)))</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>  x_chr[x_chr <span class="sc">==</span> <span class="st">""</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  yes_vals <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"yes"</span>,<span class="st">"y"</span>,<span class="st">"true"</span>,<span class="st">"t"</span>,<span class="st">"1"</span>,<span class="st">"present"</span>,<span class="st">"has"</span>,<span class="st">"active"</span>,<span class="st">"in development"</span>)</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>  no_vals  <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"no"</span>,<span class="st">"n"</span>,<span class="st">"false"</span>,<span class="st">"f"</span>,<span class="st">"0"</span>,<span class="st">"absent"</span>,<span class="st">"none"</span>,<span class="st">"inactive"</span>,<span class="st">"unverified"</span>,<span class="st">"no, vacant"</span>)</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.integer</span>(dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>    x_chr <span class="sc">%in%</span> yes_vals <span class="sc">~</span> <span class="dv">1</span>L,</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>    x_chr <span class="sc">%in%</span> no_vals  <span class="sc">~</span> <span class="dv">0</span>L,</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_integer_</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>to_region_factor <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># map region labels to codes 1..5</span></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>  ref <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Northeast"</span>,<span class="st">"Midwest"</span>,<span class="st">"South"</span>,<span class="st">"West"</span>,<span class="st">"Territories"</span>)</span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>  idx <span class="ot">&lt;-</span> <span class="fu">match</span>(<span class="fu">as.character</span>(x), ref)          <span class="co"># NA if label not in ref</span></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">factor</span>(<span class="fu">as.character</span>(idx), <span class="at">levels =</span> <span class="fu">as.character</span>(<span class="fu">seq_along</span>(ref)), <span class="at">ordered =</span> <span class="cn">TRUE</span>)</span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------- map_data_clean ----------</span></span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a>map_int_cols <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>  <span class="st">"total_number_of_executive_orders"</span>,</span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a>  <span class="st">"total_number_of_legislation"</span>,</span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a>  <span class="st">"total_number_of_administrative_rules"</span>,</span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a>  <span class="st">"publication_year"</span></span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a>map_dbl_cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"cdo_year_established"</span>)</span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a>map_bin_cols <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a>  <span class="st">"executive_orders"</span>,<span class="st">"ai_legislations"</span>,<span class="st">"administrative_rules"</span>,</span>
<span id="cb18-41"><a href="#cb18-41" aria-hidden="true" tabindex="-1"></a>  <span class="st">"digital_service_teams"</span>,<span class="st">"digital_service_impact_reports"</span>,</span>
<span id="cb18-42"><a href="#cb18-42" aria-hidden="true" tabindex="-1"></a>  <span class="st">"chief_data_officers"</span>,<span class="st">"design_systems"</span>,<span class="st">"design_system_open_source_status"</span></span>
<span id="cb18-43"><a href="#cb18-43" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-44"><a href="#cb18-44" aria-hidden="true" tabindex="-1"></a>map_cat_cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"bill_status"</span>)</span>
<span id="cb18-45"><a href="#cb18-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-46"><a href="#cb18-46" aria-hidden="true" tabindex="-1"></a>map_data_clean <span class="ot">&lt;-</span> map_data_clean <span class="sc">%&gt;%</span></span>
<span id="cb18-47"><a href="#cb18-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span> <span class="fu">as.character</span>(.))) <span class="sc">%&gt;%</span></span>
<span id="cb18-48"><a href="#cb18-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb18-49"><a href="#cb18-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">any_of</span>(map_int_cols), <span class="sc">~</span> <span class="fu">suppressWarnings</span>(<span class="fu">as.integer</span>(readr<span class="sc">::</span><span class="fu">parse_number</span>(.)))),</span>
<span id="cb18-50"><a href="#cb18-50" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">any_of</span>(map_dbl_cols), <span class="sc">~</span> <span class="fu">suppressWarnings</span>(<span class="fu">as.double</span>(readr<span class="sc">::</span><span class="fu">parse_number</span>(.)))),</span>
<span id="cb18-51"><a href="#cb18-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">any_of</span>(map_bin_cols), to_binary),</span>
<span id="cb18-52"><a href="#cb18-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">any_of</span>(map_cat_cols), <span class="sc">~</span> forcats<span class="sc">::</span><span class="fu">as_factor</span>(<span class="fu">trimws</span>(.))),</span>
<span id="cb18-53"><a href="#cb18-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">region =</span> <span class="fu">to_region_factor</span>(region)</span>
<span id="cb18-54"><a href="#cb18-54" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb18-55"><a href="#cb18-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-56"><a href="#cb18-56" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------- policy_data_clean ----------</span></span>
<span id="cb18-57"><a href="#cb18-57" aria-hidden="true" tabindex="-1"></a>pol_int_cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"executive_order_year_enacted"</span>, <span class="st">"legislative_session"</span>)</span>
<span id="cb18-58"><a href="#cb18-58" aria-hidden="true" tabindex="-1"></a>pol_cat_cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"scan_type"</span>, <span class="st">"bill_status"</span>)</span>
<span id="cb18-59"><a href="#cb18-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-60"><a href="#cb18-60" aria-hidden="true" tabindex="-1"></a>policy_data_clean <span class="ot">&lt;-</span> policy_data_clean <span class="sc">%&gt;%</span></span>
<span id="cb18-61"><a href="#cb18-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span> <span class="fu">as.character</span>(.))) <span class="sc">%&gt;%</span></span>
<span id="cb18-62"><a href="#cb18-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb18-63"><a href="#cb18-63" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">any_of</span>(pol_int_cols), <span class="sc">~</span> <span class="fu">suppressWarnings</span>(<span class="fu">as.integer</span>(readr<span class="sc">::</span><span class="fu">parse_number</span>(.)))),</span>
<span id="cb18-64"><a href="#cb18-64" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">any_of</span>(pol_cat_cols), <span class="sc">~</span> forcats<span class="sc">::</span><span class="fu">as_factor</span>(<span class="fu">trimws</span>(.))),</span>
<span id="cb18-65"><a href="#cb18-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">region =</span> <span class="fu">to_region_factor</span>(region)</span>
<span id="cb18-66"><a href="#cb18-66" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div></div>
</section>
</section>
<section id="analysis" class="level2">
<h2 class="anchored" data-anchor-id="analysis">Analysis</h2>
<p>I will look at each question one by one and clean the data as I go. I will organize the data during the analysis before exploring the results. I’ll also export intermediate results into tidy CSV files so they are ready for further visualization and exploration.</p>
<section id="q1" class="level3">
<h3 class="anchored" data-anchor-id="q1">Q1</h3>
<ul>
<li><p>How many <strong>states/territories</strong> have at least one:</p>
<ul>
<li>Executive order</li>
<li>AI Legislation</li>
<li>Chief Data Officer (CDO)</li>
<li>Digital Service Team (DST)</li>
<li>Digital Service Impact Report</li>
<li>Design system</li>
</ul></li>
</ul>
<div class="cell-container code-fold"><div class="cell-decorator"><pre>In [5]:</pre></div><div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>map_data_clean <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"map_data_clean.rds"</span>))</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Packages</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(highcharter)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(htmlwidgets)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(webshot2)</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glue)</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'scales'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:purrr':

    discard</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:readr':

    col_factor</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Indicators to analyze</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>indicators <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">executive_orders                =</span> <span class="st">"Executive order"</span>,</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">ai_legislations                =</span> <span class="st">"AI legislation"</span>,</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">chief_data_officers            =</span> <span class="st">"Chief Data Officer (CDO)"</span>,</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">digital_service_teams          =</span> <span class="st">"Digital Service Team (DST)"</span>,</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">digital_service_impact_reports =</span> <span class="st">"Digital Service Impact Report"</span>,</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">design_systems                 =</span> <span class="st">"Design system"</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Prep: unique states; turn binary fields into logical presence</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Works whether columns are 0/1 integers or TRUE/FALSE logicals</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>map_prepped <span class="ot">&lt;-</span> map_data_clean <span class="sc">%&gt;%</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(state_territory, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">any_of</span>(<span class="fu">names</span>(indicators)),</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">coalesce</span>(. <span class="sc">==</span> <span class="dv">1</span>L, <span class="cn">FALSE</span>)  <span class="co"># TRUE if value == 1; NA -&gt; FALSE</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>n_states <span class="ot">&lt;-</span> <span class="fu">nrow</span>(map_prepped)</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Summaries</span></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>counts_tbl <span class="ot">&lt;-</span> map_prepped <span class="sc">%&gt;%</span></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">any_of</span>(<span class="fu">names</span>(indicators))) <span class="sc">%&gt;%</span></span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">everything</span>(), <span class="at">names_to =</span> <span class="st">"indicator"</span>, <span class="at">values_to =</span> <span class="st">"has_it"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(indicator) <span class="sc">%&gt;%</span></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">count   =</span> <span class="fu">sum</span>(has_it, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent =</span> <span class="dv">100</span> <span class="sc">*</span> count <span class="sc">/</span> n_states,</span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">label =</span> <span class="fu">recode</span>(indicator, <span class="sc">!!!</span>indicators))</span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Ordered statements</span></span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a>order_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb23-38"><a href="#cb23-38" aria-hidden="true" tabindex="-1"></a>  <span class="st">"executive_orders"</span>,</span>
<span id="cb23-39"><a href="#cb23-39" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ai_legislations"</span>,</span>
<span id="cb23-40"><a href="#cb23-40" aria-hidden="true" tabindex="-1"></a>  <span class="st">"chief_data_officers"</span>,</span>
<span id="cb23-41"><a href="#cb23-41" aria-hidden="true" tabindex="-1"></a>  <span class="st">"design_systems"</span>,</span>
<span id="cb23-42"><a href="#cb23-42" aria-hidden="true" tabindex="-1"></a>  <span class="st">"digital_service_teams"</span>,</span>
<span id="cb23-43"><a href="#cb23-43" aria-hidden="true" tabindex="-1"></a>  <span class="st">"digital_service_impact_reports"</span></span>
<span id="cb23-44"><a href="#cb23-44" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-45"><a href="#cb23-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-46"><a href="#cb23-46" aria-hidden="true" tabindex="-1"></a>insights <span class="ot">&lt;-</span> counts_tbl <span class="sc">%&gt;%</span></span>
<span id="cb23-47"><a href="#cb23-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(indicator <span class="sc">%in%</span> order_vec) <span class="sc">%&gt;%</span></span>
<span id="cb23-48"><a href="#cb23-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb23-49"><a href="#cb23-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">statement =</span> <span class="fu">case_when</span>(</span>
<span id="cb23-50"><a href="#cb23-50" aria-hidden="true" tabindex="-1"></a>      indicator <span class="sc">==</span> <span class="st">"executive_orders"</span> <span class="sc">~</span> <span class="fu">glue</span>(<span class="st">"{number(percent, accuracy = 0.1)}% U.S. states/territories have an executive order."</span>),</span>
<span id="cb23-51"><a href="#cb23-51" aria-hidden="true" tabindex="-1"></a>      indicator <span class="sc">==</span> <span class="st">"ai_legislations"</span> <span class="sc">~</span> <span class="fu">glue</span>(<span class="st">"{number(percent, accuracy = 0.1)}% U.S. states/territories have AI legislation."</span>),</span>
<span id="cb23-52"><a href="#cb23-52" aria-hidden="true" tabindex="-1"></a>      indicator <span class="sc">==</span> <span class="st">"chief_data_officers"</span> <span class="sc">~</span> <span class="fu">glue</span>(<span class="st">"{number(percent, accuracy = 0.1)}% U.S. states/territories have a chief data office (CDO)."</span>),</span>
<span id="cb23-53"><a href="#cb23-53" aria-hidden="true" tabindex="-1"></a>      indicator <span class="sc">==</span> <span class="st">"design_systems"</span> <span class="sc">~</span> <span class="fu">glue</span>(<span class="st">"{number(percent, accuracy = 0.1)}% U.S. states/territories have a design system."</span>),</span>
<span id="cb23-54"><a href="#cb23-54" aria-hidden="true" tabindex="-1"></a>      indicator <span class="sc">==</span> <span class="st">"digital_service_teams"</span> <span class="sc">~</span> <span class="fu">glue</span>(<span class="st">"{number(percent, accuracy = 0.1)}% U.S. states/territories have a digital service team (DST)."</span>),</span>
<span id="cb23-55"><a href="#cb23-55" aria-hidden="true" tabindex="-1"></a>      indicator <span class="sc">==</span> <span class="st">"digital_service_impact_reports"</span> <span class="sc">~</span> <span class="fu">glue</span>(<span class="st">"{number(percent, accuracy = 0.1)}% U.S. states/territories have a digital service impact report."</span>)</span>
<span id="cb23-56"><a href="#cb23-56" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-57"><a href="#cb23-57" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb23-58"><a href="#cb23-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(indicator, label, count, percent, statement) <span class="sc">%&gt;%</span></span>
<span id="cb23-59"><a href="#cb23-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent =</span> <span class="fu">round</span>(percent, <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb23-60"><a href="#cb23-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">match</span>(indicator, order_vec))</span>
<span id="cb23-61"><a href="#cb23-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-62"><a href="#cb23-62" aria-hidden="true" tabindex="-1"></a><span class="co"># Save insights</span></span>
<span id="cb23-63"><a href="#cb23-63" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_csv</span>(insights, <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"insights.csv"</span>))</span>
<span id="cb23-64"><a href="#cb23-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-65"><a href="#cb23-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Chart</span></span>
<span id="cb23-66"><a href="#cb23-66" aria-hidden="true" tabindex="-1"></a>counts_for_chart <span class="ot">&lt;-</span> counts_tbl <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(count))</span>
<span id="cb23-67"><a href="#cb23-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-68"><a href="#cb23-68" aria-hidden="true" tabindex="-1"></a>hc <span class="ot">&lt;-</span> <span class="fu">highchart</span>() <span class="sc">%&gt;%</span></span>
<span id="cb23-69"><a href="#cb23-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_chart</span>(<span class="at">type =</span> <span class="st">"column"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-70"><a href="#cb23-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_title</span>(<span class="at">text =</span> <span class="st">"States/Territories with at least one item"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-71"><a href="#cb23-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_subtitle</span>(<span class="at">text =</span> <span class="fu">paste0</span>(<span class="st">"n = "</span>, n_states, <span class="st">" states/territories"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb23-72"><a href="#cb23-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_xAxis</span>(<span class="at">categories =</span> counts_for_chart<span class="sc">$</span>label, <span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="cn">NULL</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb23-73"><a href="#cb23-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_yAxis</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Count"</span>), <span class="at">allowDecimals =</span> <span class="cn">FALSE</span>, <span class="at">min =</span> <span class="dv">0</span>,</span>
<span id="cb23-74"><a href="#cb23-74" aria-hidden="true" tabindex="-1"></a>           <span class="at">max =</span> <span class="fu">max</span>(counts_for_chart<span class="sc">$</span>count)) <span class="sc">%&gt;%</span></span>
<span id="cb23-75"><a href="#cb23-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_series</span>(</span>
<span id="cb23-76"><a href="#cb23-76" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(</span>
<span id="cb23-77"><a href="#cb23-77" aria-hidden="true" tabindex="-1"></a>      <span class="at">name =</span> <span class="st">"Count"</span>,</span>
<span id="cb23-78"><a href="#cb23-78" aria-hidden="true" tabindex="-1"></a>      <span class="at">data =</span> counts_for_chart<span class="sc">$</span>count,</span>
<span id="cb23-79"><a href="#cb23-79" aria-hidden="true" tabindex="-1"></a>      <span class="at">dataLabels =</span> <span class="fu">list</span>(<span class="at">enabled =</span> <span class="cn">TRUE</span>),</span>
<span id="cb23-80"><a href="#cb23-80" aria-hidden="true" tabindex="-1"></a>      <span class="at">tooltip =</span> <span class="fu">list</span>(<span class="at">pointFormat =</span> <span class="fu">paste0</span>(<span class="st">"&lt;b&gt;{point.y}&lt;/b&gt; of "</span>, n_states))</span>
<span id="cb23-81"><a href="#cb23-81" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-82"><a href="#cb23-82" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb23-83"><a href="#cb23-83" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_plotOptions</span>(<span class="at">column =</span> <span class="fu">list</span>(<span class="at">borderRadius =</span> <span class="dv">3</span>, <span class="at">pointPadding =</span> <span class="fl">0.05</span>, <span class="at">groupPadding =</span> <span class="fl">0.1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb23-84"><a href="#cb23-84" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_exporting</span>(<span class="at">enabled =</span> <span class="cn">TRUE</span>)</span>
<span id="cb23-85"><a href="#cb23-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-86"><a href="#cb23-86" aria-hidden="true" tabindex="-1"></a><span class="fu">saveWidget</span>(hc, <span class="at">file =</span> <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"q1.html"</span>), <span class="at">selfcontained =</span> <span class="cn">TRUE</span>)</span>
<span id="cb23-87"><a href="#cb23-87" aria-hidden="true" tabindex="-1"></a>webshot2<span class="sc">::</span><span class="fu">webshot</span>(<span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"q1.html"</span>), <span class="at">file =</span> <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"q1.png"</span>),</span>
<span id="cb23-88"><a href="#cb23-88" aria-hidden="true" tabindex="-1"></a>                  <span class="at">vwidth =</span> <span class="dv">900</span>, <span class="at">vheight =</span> <span class="dv">600</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>file:////Users/elhamali/Documents/Data Projects/state-of-states-map-analysis/output/q1.html screenshot completed</code></pre>
</div>
<div class="cell-output-display">
<div class="">
<figure class="figure">
<p class=""><a href="analysis_files/figure-html/research-question-1-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="analysis_files/figure-html/research-question-1-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>insights<span class="sc">$</span>statement</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>83.9% U.S. states/territories have an executive order.
55.4% U.S. states/territories have AI legislation.
51.8% U.S. states/territories have a chief data office (CDO).
33.9% U.S. states/territories have a design system.
25.0% U.S. states/territories have a digital service team (DST).
12.5% U.S. states/territories have a digital service impact report.</code></pre>
</div>
</div></div>
</section>
<section id="q2" class="level3">
<h3 class="anchored" data-anchor-id="q2">Q2</h3>
<ul>
<li><p>Which <strong>regions</strong> have the most vs least:</p>
<ul>
<li><p>Executive order</p></li>
<li><p>AI Legislations</p></li>
<li><p>Chief Data Officers (CDO)</p></li>
<li><p>Digital Service Teams (DST)</p></li>
<li><p>Digital Service Impact Reports</p></li>
<li><p>Design systems</p></li>
</ul></li>
</ul>
<p>I grouped states and territories into CDC regions and flagged whether each had an executive order, AI legislation, a Chief Data Officer (CDO), a Digital Service Team (DST), a Digital Service Impact Report, or a design system. I then summed counts within each region to identify where adoption was highest and lowest.</p>
<div class="cell-container code-fold"><div class="cell-decorator"><pre>In [6]:</pre></div><div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr); <span class="fu">library</span>(here)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr); <span class="fu">library</span>(tidyr); <span class="fu">library</span>(purrr)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glue)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>map_data_clean <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"map_data_clean.rds"</span>))</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Indicators</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>indicators <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">executive_orders                =</span> <span class="st">"Executive order"</span>,</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">ai_legislations                 =</span> <span class="st">"AI legislation"</span>,</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">chief_data_officers             =</span> <span class="st">"Chief Data Officer (CDO)"</span>,</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">digital_service_teams           =</span> <span class="st">"Digital Service Team (DST)"</span>,</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">digital_service_impact_reports  =</span> <span class="st">"Digital Service Impact Report"</span>,</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">design_systems                  =</span> <span class="st">"Design system"</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>region_order <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Northeast"</span>,<span class="st">"Midwest"</span>,<span class="st">"South"</span>,<span class="st">"West"</span>,<span class="st">"Territories"</span>)</span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Prep: one row per state, coerce to logical</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>map_prepped <span class="ot">&lt;-</span> map_data_clean <span class="sc">%&gt;%</span></span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(state_territory, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(region)) <span class="sc">%&gt;%</span></span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">region =</span> <span class="fu">factor</span>(region, <span class="at">levels =</span> region_order)) <span class="sc">%&gt;%</span></span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">any_of</span>(<span class="fu">names</span>(indicators)),</span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>                <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">coalesce</span>(. <span class="sc">==</span> <span class="dv">1</span>L <span class="sc">|</span> . <span class="sc">==</span> <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)))</span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Counts by region &amp; indicator</span></span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a>region_counts <span class="ot">&lt;-</span> map_prepped <span class="sc">%&gt;%</span></span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(region, <span class="fu">any_of</span>(<span class="fu">names</span>(indicators))) <span class="sc">%&gt;%</span></span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>region, <span class="at">names_to =</span> <span class="st">"indicator"</span>, <span class="at">values_to =</span> <span class="st">"has_it"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(region, indicator) <span class="sc">%&gt;%</span></span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">sum</span>(has_it, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">label =</span> <span class="fu">recode</span>(indicator, <span class="sc">!!!</span>indicators)) <span class="sc">%&gt;%</span></span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(label, region)</span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Find most/least per indicator</span></span>
<span id="cb27-37"><a href="#cb27-37" aria-hidden="true" tabindex="-1"></a>most_tbl <span class="ot">&lt;-</span> region_counts <span class="sc">%&gt;%</span></span>
<span id="cb27-38"><a href="#cb27-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(indicator) <span class="sc">%&gt;%</span></span>
<span id="cb27-39"><a href="#cb27-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(count, <span class="at">with_ties =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-40"><a href="#cb27-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb27-41"><a href="#cb27-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">which =</span> <span class="st">"most"</span>)</span>
<span id="cb27-42"><a href="#cb27-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-43"><a href="#cb27-43" aria-hidden="true" tabindex="-1"></a>least_tbl <span class="ot">&lt;-</span> region_counts <span class="sc">%&gt;%</span></span>
<span id="cb27-44"><a href="#cb27-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(indicator) <span class="sc">%&gt;%</span></span>
<span id="cb27-45"><a href="#cb27-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_min</span>(count, <span class="at">with_ties =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-46"><a href="#cb27-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb27-47"><a href="#cb27-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">which =</span> <span class="st">"least"</span>)</span>
<span id="cb27-48"><a href="#cb27-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-49"><a href="#cb27-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Build sentences</span></span>
<span id="cb27-50"><a href="#cb27-50" aria-hidden="true" tabindex="-1"></a>pretty_regions <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">paste</span>(x, <span class="at">collapse =</span> <span class="st">", "</span>)</span>
<span id="cb27-51"><a href="#cb27-51" aria-hidden="true" tabindex="-1"></a>mk_sentence <span class="ot">&lt;-</span> <span class="cf">function</span>(rows, which, obj) {</span>
<span id="cb27-52"><a href="#cb27-52" aria-hidden="true" tabindex="-1"></a>  regs <span class="ot">&lt;-</span> <span class="fu">pretty_regions</span>(rows<span class="sc">$</span>region)</span>
<span id="cb27-53"><a href="#cb27-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glue</span>(<span class="st">"{regs} has the {which} {obj}."</span>)</span>
<span id="cb27-54"><a href="#cb27-54" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb27-55"><a href="#cb27-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-56"><a href="#cb27-56" aria-hidden="true" tabindex="-1"></a>insights_q2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">indicator =</span> <span class="fu">unique</span>(region_counts<span class="sc">$</span>indicator)) <span class="sc">%&gt;%</span></span>
<span id="cb27-57"><a href="#cb27-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb27-58"><a href="#cb27-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">recode</span>(indicator, <span class="sc">!!!</span>indicators),</span>
<span id="cb27-59"><a href="#cb27-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">statement =</span> <span class="fu">map_chr</span>(indicator, \(ind) {</span>
<span id="cb27-60"><a href="#cb27-60" aria-hidden="true" tabindex="-1"></a>      most  <span class="ot">&lt;-</span> <span class="fu">filter</span>(most_tbl,  indicator <span class="sc">==</span> ind)</span>
<span id="cb27-61"><a href="#cb27-61" aria-hidden="true" tabindex="-1"></a>      least <span class="ot">&lt;-</span> <span class="fu">filter</span>(least_tbl, indicator <span class="sc">==</span> ind)</span>
<span id="cb27-62"><a href="#cb27-62" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste</span>(</span>
<span id="cb27-63"><a href="#cb27-63" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mk_sentence</span>(most, <span class="st">"most"</span>,  <span class="fu">recode</span>(ind, <span class="sc">!!!</span>indicators)),</span>
<span id="cb27-64"><a href="#cb27-64" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mk_sentence</span>(least, <span class="st">"least"</span>, <span class="fu">recode</span>(ind, <span class="sc">!!!</span>indicators))</span>
<span id="cb27-65"><a href="#cb27-65" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb27-66"><a href="#cb27-66" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb27-67"><a href="#cb27-67" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb27-68"><a href="#cb27-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(label, statement)</span>
<span id="cb27-69"><a href="#cb27-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-70"><a href="#cb27-70" aria-hidden="true" tabindex="-1"></a><span class="co"># Save both outputs</span></span>
<span id="cb27-71"><a href="#cb27-71" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(region_counts, <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"region_counts_q2.csv"</span>))</span>
<span id="cb27-72"><a href="#cb27-72" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(insights_q2,  <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"insights_q2.csv"</span>))</span>
<span id="cb27-73"><a href="#cb27-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-74"><a href="#cb27-74" aria-hidden="true" tabindex="-1"></a><span class="co"># Print results in document</span></span>
<span id="cb27-75"><a href="#cb27-75" aria-hidden="true" tabindex="-1"></a><span class="co"># region_counts</span></span>
<span id="cb27-76"><a href="#cb27-76" aria-hidden="true" tabindex="-1"></a>insights_q2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  label                         statement                                       
  &lt;chr&gt;                         &lt;chr&gt;                                           
1 AI legislation                South has the most AI legislation. Territories …
2 Chief Data Officer (CDO)      South, West has the most Chief Data Officer (CD…
3 Design system                 Northeast, South has the most Design system. Te…
4 Digital Service Impact Report Northeast has the most Digital Service Impact R…
5 Digital Service Team (DST)    Northeast has the most Digital Service Team (DS…
6 Executive order               South has the most Executive order. Territories…</code></pre>
</div>
</div></div>
</section>
<section id="q3" class="level3">
<h3 class="anchored" data-anchor-id="q3">Q3</h3>
<ul>
<li>Which states are the <strong>most active vs.&nbsp;least active</strong> across all categories?</li>
</ul>
<p>To measure overall state activity, I created a six-item score where states received one point for the presence of each digital activity (executive orders, AI legislation, CDO, DST, Digital Service Impact Report, design system). Each state’s score ranged from 0–6 to indicate the breadth of digital transformation. I then ranked states by total score and identified the most and least active states.</p>
<div class="cell-container code-fold"><div class="cell-decorator"><pre>In [7]:</pre></div><div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr); <span class="fu">library</span>(here)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr); <span class="fu">library</span>(tidyr); <span class="fu">library</span>(purrr); <span class="fu">library</span>(glue)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 1) Load</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>map_data_clean <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"map_data_clean.rds"</span>))</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) Columns (names = dataset column names; values = friendly labels)</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>act_labels <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">executive_orders               =</span> <span class="st">"Executive orders"</span>,</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">ai_legislations                =</span> <span class="st">"AI legislations"</span>,</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">chief_data_officers            =</span> <span class="st">"Chief Data Officers (CDO)"</span>,</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">digital_service_teams          =</span> <span class="st">"Digital Service Teams (DST)"</span>,</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">digital_service_impact_reports =</span> <span class="st">"Digital Service Impact Reports"</span>,</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">design_systems                 =</span> <span class="st">"Design systems"</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 3) Presence (0/1) per category, score out of 6 (one row per state)</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>state_counts_q3 <span class="ot">&lt;-</span> map_data_clean <span class="sc">%&gt;%</span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(state_territory, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>    state_territory,</span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>      <span class="fu">all_of</span>(<span class="fu">names</span>(act_labels)),</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> <span class="fu">as.integer</span>(dplyr<span class="sc">::</span><span class="fu">coalesce</span>(. <span class="sc">&gt;=</span> <span class="dv">1</span>L, <span class="cn">FALSE</span>))</span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">activity_score =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(<span class="fu">names</span>(act_labels)))),</span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">categories_present =</span> <span class="fu">pmap_chr</span>(</span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>      <span class="fu">across</span>(<span class="fu">all_of</span>(<span class="fu">names</span>(act_labels))),</span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> {</span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>        vals <span class="ot">&lt;-</span> <span class="fu">c</span>(...)</span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a>        labs <span class="ot">&lt;-</span> act_labels[vals <span class="sc">==</span> <span class="dv">1</span>]</span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">length</span>(labs) <span class="sc">==</span> <span class="dv">0</span>) <span class="st">"None"</span> <span class="cf">else</span> <span class="fu">paste</span>(labs, <span class="at">collapse =</span> <span class="st">", "</span>)</span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(activity_score), state_territory)</span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a><span class="co"># 4) Full ranks (for later viz)</span></span>
<span id="cb29-41"><a href="#cb29-41" aria-hidden="true" tabindex="-1"></a>state_ranks_q3 <span class="ot">&lt;-</span> state_counts_q3 <span class="sc">%&gt;%</span></span>
<span id="cb29-42"><a href="#cb29-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb29-43"><a href="#cb29-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">rank_desc =</span> <span class="fu">min_rank</span>(<span class="fu">desc</span>(activity_score)),  <span class="co"># 1 = most active</span></span>
<span id="cb29-44"><a href="#cb29-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">rank_asc  =</span> <span class="fu">min_rank</span>(activity_score)        <span class="co"># 1 = least active</span></span>
<span id="cb29-45"><a href="#cb29-45" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb29-46"><a href="#cb29-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(rank_desc, state_territory)</span>
<span id="cb29-47"><a href="#cb29-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-48"><a href="#cb29-48" aria-hidden="true" tabindex="-1"></a><span class="co"># 5) Top/bottom 10 (ties included at the cutoff)</span></span>
<span id="cb29-49"><a href="#cb29-49" aria-hidden="true" tabindex="-1"></a>top10 <span class="ot">&lt;-</span> state_ranks_q3 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(rank_desc <span class="sc">&lt;=</span> <span class="dv">10</span>)</span>
<span id="cb29-50"><a href="#cb29-50" aria-hidden="true" tabindex="-1"></a>bot10 <span class="ot">&lt;-</span> state_ranks_q3 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(rank_asc  <span class="sc">&lt;=</span> <span class="dv">10</span>)</span>
<span id="cb29-51"><a href="#cb29-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-52"><a href="#cb29-52" aria-hidden="true" tabindex="-1"></a>fmt_list <span class="ot">&lt;-</span> <span class="cf">function</span>(df) <span class="fu">paste0</span>(df<span class="sc">$</span>state_territory, <span class="st">" ("</span>, df<span class="sc">$</span>activity_score, <span class="st">"/6)"</span>, <span class="at">collapse =</span> <span class="st">"; "</span>)</span>
<span id="cb29-53"><a href="#cb29-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-54"><a href="#cb29-54" aria-hidden="true" tabindex="-1"></a>insights_q3 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb29-55"><a href="#cb29-55" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="fu">c</span>(<span class="st">"Most active (top 10; ties included)"</span>, <span class="st">"Least active (bottom 10; ties included)"</span>),</span>
<span id="cb29-56"><a href="#cb29-56" aria-hidden="true" tabindex="-1"></a>  <span class="at">statement =</span> <span class="fu">c</span>(<span class="fu">fmt_list</span>(top10), <span class="fu">fmt_list</span>(bot10))</span>
<span id="cb29-57"><a href="#cb29-57" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-58"><a href="#cb29-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-59"><a href="#cb29-59" aria-hidden="true" tabindex="-1"></a><span class="co"># 6) Save (match Q2 naming pattern: *_q3.csv) -------------------------------</span></span>
<span id="cb29-60"><a href="#cb29-60" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(<span class="fu">here</span>(<span class="st">"output"</span>))) <span class="fu">dir.create</span>(<span class="fu">here</span>(<span class="st">"output"</span>), <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb29-61"><a href="#cb29-61" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(state_counts_q3, <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"state_counts_q3.csv"</span>))</span>
<span id="cb29-62"><a href="#cb29-62" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(insights_q3,     <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"insights_q3.csv"</span>))</span>
<span id="cb29-63"><a href="#cb29-63" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(state_ranks_q3,  <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"state_ranks_q3.csv"</span>))</span>
<span id="cb29-64"><a href="#cb29-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-65"><a href="#cb29-65" aria-hidden="true" tabindex="-1"></a><span class="co"># 7) Print in document (same pattern as Q2)</span></span>
<span id="cb29-66"><a href="#cb29-66" aria-hidden="true" tabindex="-1"></a><span class="co"># state_counts_q3</span></span>
<span id="cb29-67"><a href="#cb29-67" aria-hidden="true" tabindex="-1"></a>insights_q3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  type                                    statement                             
  &lt;chr&gt;                                   &lt;chr&gt;                                 
1 Most active (top 10; ties included)     California (6/6); Colorado (6/6); Mas…
2 Least active (bottom 10; ties included) Alabama (1/6); Alaska (1/6); American…</code></pre>
</div>
</div></div>
</section>
<section id="q4" class="level3">
<h3 class="anchored" data-anchor-id="q4">Q4</h3>
<ul>
<li>Which states introduced <strong>CDOs or DSTs earliest</strong>, and how has that spread across regions?</li>
</ul>
<p>For CDOs, I filtered to states with an active CDO and recorded the year the office was established. I then identified the earliest and most recent adopters. For DSTs, I imported a separate dataset of team founding years and names, cleaned it, and identified the earliest and latest established teams.</p>
<div class="cell-container code-fold"><div class="cell-decorator"><pre>In [8]:</pre></div><div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr); <span class="fu">library</span>(here)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr); <span class="fu">library</span>(glue)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co"># -------------------------------------------------------------------</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 1) Load map_data_clean</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>map_data_clean <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"map_data_clean.rds"</span>))</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="co"># -------------------------------------------------------------------</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) Import and clean dst_data.csv -&gt; dst_data_clean</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>dst_data_clean <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"dst_data.csv"</span>),</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>                           <span class="at">show_col_types =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">team_year_founded =</span> <span class="fu">as.integer</span>(team_year_founded),</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">state_territory   =</span> <span class="fu">as.character</span>(state_territory),</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">team_name         =</span> <span class="fu">as.character</span>(team_name)</span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Save cleaned DST data</span></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(dst_data_clean, <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"dst_data_clean.rds"</span>))</span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(dst_data_clean, <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"dst_data_clean.csv"</span>))</span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a><span class="co"># -------------------------------------------------------------------</span></span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 3) CDO analysis</span></span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>cdo_tbl <span class="ot">&lt;-</span> map_data_clean <span class="sc">%&gt;%</span></span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(state_territory, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(cdo_year_established) <span class="sc">&amp;</span> chief_data_officers <span class="sc">&gt;=</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(state_territory, cdo_year_established)</span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a>earliest_cdo <span class="ot">&lt;-</span> cdo_tbl <span class="sc">%&gt;%</span></span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cdo_year_established <span class="sc">==</span> <span class="fu">min</span>(cdo_year_established, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a>latest_cdo <span class="ot">&lt;-</span> cdo_tbl <span class="sc">%&gt;%</span></span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cdo_year_established <span class="sc">==</span> <span class="fu">max</span>(cdo_year_established, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"></a>insights_cdo <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb31-35"><a href="#cb31-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">statement =</span> <span class="fu">c</span>(</span>
<span id="cb31-36"><a href="#cb31-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glue</span>(<span class="st">"{earliest_cdo$state_territory} introduced CDOs earliest in {earliest_cdo$cdo_year_established}."</span>),</span>
<span id="cb31-37"><a href="#cb31-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glue</span>(<span class="st">"{latest_cdo$state_territory} introduced CDOs the latest in {latest_cdo$cdo_year_established}."</span>)</span>
<span id="cb31-38"><a href="#cb31-38" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb31-39"><a href="#cb31-39" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb31-40"><a href="#cb31-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-41"><a href="#cb31-41" aria-hidden="true" tabindex="-1"></a><span class="co"># -------------------------------------------------------------------</span></span>
<span id="cb31-42"><a href="#cb31-42" aria-hidden="true" tabindex="-1"></a><span class="co"># 4) DST analysis</span></span>
<span id="cb31-43"><a href="#cb31-43" aria-hidden="true" tabindex="-1"></a>dst_tbl <span class="ot">&lt;-</span> dst_data_clean <span class="sc">%&gt;%</span></span>
<span id="cb31-44"><a href="#cb31-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(team_year_founded)) <span class="sc">%&gt;%</span></span>
<span id="cb31-45"><a href="#cb31-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(team_year_founded)</span>
<span id="cb31-46"><a href="#cb31-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-47"><a href="#cb31-47" aria-hidden="true" tabindex="-1"></a>earliest_dst <span class="ot">&lt;-</span> dst_tbl <span class="sc">%&gt;%</span></span>
<span id="cb31-48"><a href="#cb31-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(team_year_founded <span class="sc">==</span> <span class="fu">min</span>(team_year_founded, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb31-49"><a href="#cb31-49" aria-hidden="true" tabindex="-1"></a>latest_dst <span class="ot">&lt;-</span> dst_tbl <span class="sc">%&gt;%</span></span>
<span id="cb31-50"><a href="#cb31-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(team_year_founded <span class="sc">==</span> <span class="fu">max</span>(team_year_founded, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb31-51"><a href="#cb31-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-52"><a href="#cb31-52" aria-hidden="true" tabindex="-1"></a>insights_dst <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb31-53"><a href="#cb31-53" aria-hidden="true" tabindex="-1"></a>  <span class="at">statement =</span> <span class="fu">c</span>(</span>
<span id="cb31-54"><a href="#cb31-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glue</span>(<span class="st">"{earliest_dst$state_territory} introduced its Digital Service Team ({earliest_dst$team_name}) earliest in {earliest_dst$team_year_founded}."</span>),</span>
<span id="cb31-55"><a href="#cb31-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glue</span>(<span class="st">"{latest_dst$state_territory} introduced its Digital Service Team ({latest_dst$team_name}) the latest in {latest_dst$team_year_founded}."</span>)</span>
<span id="cb31-56"><a href="#cb31-56" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb31-57"><a href="#cb31-57" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb31-58"><a href="#cb31-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-59"><a href="#cb31-59" aria-hidden="true" tabindex="-1"></a><span class="co"># -------------------------------------------------------------------</span></span>
<span id="cb31-60"><a href="#cb31-60" aria-hidden="true" tabindex="-1"></a><span class="co"># 5) Save outputs</span></span>
<span id="cb31-61"><a href="#cb31-61" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(<span class="fu">here</span>(<span class="st">"output"</span>))) <span class="fu">dir.create</span>(<span class="fu">here</span>(<span class="st">"output"</span>), <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb31-62"><a href="#cb31-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-63"><a href="#cb31-63" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(cdo_tbl,      <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"cdo_years_q4.csv"</span>))</span>
<span id="cb31-64"><a href="#cb31-64" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(insights_cdo, <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"insights_cdo_q4.csv"</span>))</span>
<span id="cb31-65"><a href="#cb31-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-66"><a href="#cb31-66" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(dst_tbl,      <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"dst_years_q4.csv"</span>))</span>
<span id="cb31-67"><a href="#cb31-67" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(insights_dst, <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"insights_dst_q4.csv"</span>))</span>
<span id="cb31-68"><a href="#cb31-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-69"><a href="#cb31-69" aria-hidden="true" tabindex="-1"></a><span class="co"># -------------------------------------------------------------------</span></span>
<span id="cb31-70"><a href="#cb31-70" aria-hidden="true" tabindex="-1"></a><span class="co"># 6) Print in document</span></span>
<span id="cb31-71"><a href="#cb31-71" aria-hidden="true" tabindex="-1"></a>cdo_tbl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        state_territory cdo_year_established
1               Arizona                 2024
2              Arkansas                 2017
3            California                 2019
4              Colorado                 2010
5           Connecticut                 2014
6              Delaware                 2018
7  District of Columbia                 2017
8               Florida                 2017
9                Hawaii                 2022
10              Indiana                 2017
11               Kansas                 2024
12                Maine                 2018
13             Maryland                 2021
14        Massachusetts                 2016
15             Michigan                 2023
16             Missouri                 2023
17              Montana                 2021
18               Nevada                 2024
19           New Jersey                 2015
20       North Carolina                 2016
21         North Dakota                 2018
22                 Ohio                 2021
23         Rhode Island                 2024
24            Tennessee                 2020
25                Texas                 2015
26              Vermont                 2017
27           Washington                 2022
28              Wyoming                 2019</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>insights_cdo</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 1
  statement                                       
  &lt;chr&gt;                                           
1 Colorado introduced CDOs earliest in 2010.      
2 Arizona introduced CDOs the latest in 2024.     
3 Kansas introduced CDOs the latest in 2024.      
4 Nevada introduced CDOs the latest in 2024.      
5 Rhode Island introduced CDOs the latest in 2024.</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>dst_tbl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 6
   state_territory team_name            team_year_founded team_location_in_org…¹
   &lt;chr&gt;           &lt;chr&gt;                            &lt;int&gt; &lt;chr&gt;                 
 1 Delaware        Delaware Government…              2001 Department of State   
 2 New York        New York State Digi…              2013 Office of General Ser…
 3 Rhode Island    Rhode Island Enterp…              2013 Department of Adminis…
 4 North Carolina  North Carolina Digi…              2015 Department of Informa…
 5 Massachusetts   Massachusetts Digit…              2017 Executive Office of T…
 6 Vermont         Vermont Agency of D…              2017 Governor's Office     
 7 New Jersey      New Jersey Office o…              2018 External nonprofit    
 8 Colorado        Colorado Digital Se…              2019 The Governor's Office…
 9 Connecticut     Connecticut Digital…              2019 Department of Adminis…
10 California      California Office o…              2019 Government Operations…
11 Colorado        Colorado Behavioral…              2022 Behavioral Health Adm…
12 Pennsylvania    Pennsylvania Common…              2023 Office of Administrat…
13 Arizona         Arizona Digital Sol…              2024 Arizona Department of…
14 Maryland        Maryland Digital Se…              2024 Department of Informa…
15 Minnesota       Minnesota Digital S…              2024 Department of Human S…
# ℹ abbreviated name: ¹​team_location_in_organization
# ℹ 2 more variables: operational_status &lt;chr&gt;, funding_model &lt;chr&gt;</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>insights_dst</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 1
  statement                                                                     
  &lt;chr&gt;                                                                         
1 Delaware introduced its Digital Service Team (Delaware Government Information…
2 Arizona introduced its Digital Service Team (Arizona Digital Solutions Office…
3 Maryland introduced its Digital Service Team (Maryland Digital Service (MDDS)…
4 Minnesota introduced its Digital Service Team (Minnesota Digital Services, An…</code></pre>
</div>
</div></div>
</section>
<section id="q5" class="level3">
<h3 class="anchored" data-anchor-id="q5">Q5</h3>
<ul>
<li>Which states with <strong>active CDOs</strong> also have <strong>design systems</strong> or <strong>DSTs</strong>?</li>
</ul>
<p>I examined whether states with CDOs also adopted other infrastructure (design systems or DSTs). After filtering to states with active CDOs, I tallied how many also had design systems or DSTs. I then compared the likelihood of having a DST between states with and without CDOs using a relative likelihood ratio.</p>
<div class="cell-container code-fold"><div class="cell-decorator"><pre>In [9]:</pre></div><div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr); <span class="fu">library</span>(here)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr); <span class="fu">library</span>(glue)</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co"># -------------------------------------------------------------------</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 1) Load cleaned dataset</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>map_data_clean <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"map_data_clean.rds"</span>))</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="co"># -------------------------------------------------------------------</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) Prep: keep one row per state/territory, coerce presence to 0/1</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>q5_tbl <span class="ot">&lt;-</span> map_data_clean <span class="sc">%&gt;%</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(state_territory, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>    state_territory,</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">cdo    =</span> <span class="fu">as.integer</span>(<span class="fu">coalesce</span>(chief_data_officers,        <span class="dv">0</span>L) <span class="sc">&gt;=</span> <span class="dv">1</span>L),</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">design =</span> <span class="fu">as.integer</span>(<span class="fu">coalesce</span>(design_systems,             <span class="dv">0</span>L) <span class="sc">&gt;=</span> <span class="dv">1</span>L),</span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">dst    =</span> <span class="fu">as.integer</span>(<span class="fu">coalesce</span>(digital_service_teams,      <span class="dv">0</span>L) <span class="sc">&gt;=</span> <span class="dv">1</span>L)</span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a><span class="co"># -------------------------------------------------------------------</span></span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a><span class="co"># 3) Which states with active CDOs also have design systems or DSTs?</span></span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>cdo_active <span class="ot">&lt;-</span> q5_tbl <span class="sc">%&gt;%</span> <span class="fu">filter</span>(cdo <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>cdo_with_design_or_dst <span class="ot">&lt;-</span> cdo_active <span class="sc">%&gt;%</span></span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(design <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> dst <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-26"><a href="#cb39-26" aria-hidden="true" tabindex="-1"></a>num_states <span class="ot">&lt;-</span> <span class="fu">nrow</span>(cdo_with_design_or_dst)</span>
<span id="cb39-27"><a href="#cb39-27" aria-hidden="true" tabindex="-1"></a>state_names <span class="ot">&lt;-</span> <span class="fu">paste</span>(cdo_with_design_or_dst<span class="sc">$</span>state_territory, <span class="at">collapse =</span> <span class="st">", "</span>)</span>
<span id="cb39-28"><a href="#cb39-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-29"><a href="#cb39-29" aria-hidden="true" tabindex="-1"></a><span class="co"># -------------------------------------------------------------------</span></span>
<span id="cb39-30"><a href="#cb39-30" aria-hidden="true" tabindex="-1"></a><span class="co"># 4) Likelihood comparison: probability of DST with CDO vs. without</span></span>
<span id="cb39-31"><a href="#cb39-31" aria-hidden="true" tabindex="-1"></a>p_dst_with_cdo <span class="ot">&lt;-</span> <span class="fu">mean</span>(cdo_active<span class="sc">$</span>dst <span class="sc">==</span> <span class="dv">1</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb39-32"><a href="#cb39-32" aria-hidden="true" tabindex="-1"></a>p_dst_without  <span class="ot">&lt;-</span> <span class="fu">mean</span>(q5_tbl <span class="sc">%&gt;%</span> <span class="fu">filter</span>(cdo <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(dst) <span class="sc">==</span> <span class="dv">1</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb39-33"><a href="#cb39-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-34"><a href="#cb39-34" aria-hidden="true" tabindex="-1"></a>likelihood_ratio <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(p_dst_without <span class="sc">&gt;</span> <span class="dv">0</span>, p_dst_with_cdo <span class="sc">/</span> p_dst_without, <span class="cn">NA_real_</span>)</span>
<span id="cb39-35"><a href="#cb39-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-36"><a href="#cb39-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Round ratio nicely (e.g., 2.2x more likely)</span></span>
<span id="cb39-37"><a href="#cb39-37" aria-hidden="true" tabindex="-1"></a>ratio_text <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(likelihood_ratio), <span class="st">"undefined"</span>,</span>
<span id="cb39-38"><a href="#cb39-38" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">paste0</span>(<span class="fu">round</span>(likelihood_ratio, <span class="dv">1</span>), <span class="st">"x more"</span>))</span>
<span id="cb39-39"><a href="#cb39-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-40"><a href="#cb39-40" aria-hidden="true" tabindex="-1"></a><span class="co"># -------------------------------------------------------------------</span></span>
<span id="cb39-41"><a href="#cb39-41" aria-hidden="true" tabindex="-1"></a><span class="co"># 5) Build insight statements</span></span>
<span id="cb39-42"><a href="#cb39-42" aria-hidden="true" tabindex="-1"></a>insights_q5 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb39-43"><a href="#cb39-43" aria-hidden="true" tabindex="-1"></a>  <span class="at">statement =</span> <span class="fu">c</span>(</span>
<span id="cb39-44"><a href="#cb39-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glue</span>(<span class="st">"{num_states} states with active CDOs also have design systems or DSTs. They are {state_names}."</span>),</span>
<span id="cb39-45"><a href="#cb39-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glue</span>(<span class="st">"States with Chief Data Officers are {ratio_text} likely to have digital service teams."</span>)</span>
<span id="cb39-46"><a href="#cb39-46" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb39-47"><a href="#cb39-47" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb39-48"><a href="#cb39-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-49"><a href="#cb39-49" aria-hidden="true" tabindex="-1"></a><span class="co"># -------------------------------------------------------------------</span></span>
<span id="cb39-50"><a href="#cb39-50" aria-hidden="true" tabindex="-1"></a><span class="co"># 6) Save outputs</span></span>
<span id="cb39-51"><a href="#cb39-51" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(<span class="fu">here</span>(<span class="st">"output"</span>))) <span class="fu">dir.create</span>(<span class="fu">here</span>(<span class="st">"output"</span>), <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb39-52"><a href="#cb39-52" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(q5_tbl,        <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"state_counts_q5.csv"</span>))</span>
<span id="cb39-53"><a href="#cb39-53" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(insights_q5,   <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"insights_q5.csv"</span>))</span>
<span id="cb39-54"><a href="#cb39-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-55"><a href="#cb39-55" aria-hidden="true" tabindex="-1"></a><span class="co"># -------------------------------------------------------------------</span></span>
<span id="cb39-56"><a href="#cb39-56" aria-hidden="true" tabindex="-1"></a><span class="co"># 7) Print results</span></span>
<span id="cb39-57"><a href="#cb39-57" aria-hidden="true" tabindex="-1"></a>q5_tbl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>            state_territory cdo design dst
1                   Alabama   0      0   0
2                    Alaska   0      0   0
3            American Samoa   0      0   0
4                   Arizona   1      0   1
5                  Arkansas   1      0   0
6                California   1      1   1
7                  Colorado   1      1   1
8               Connecticut   1      1   1
9                  Delaware   1      1   1
10     District of Columbia   1      0   0
11                  Florida   1      0   0
12                  Georgia   0      1   0
13                     Guam   0      0   0
14                   Hawaii   1      0   0
15                    Idaho   0      0   0
16                 Illinois   0      1   0
17                  Indiana   1      0   0
18                     Iowa   0      1   0
19                   Kansas   1      0   0
20                 Kentucky   0      0   0
21                Louisiana   0      1   0
22                    Maine   1      0   0
23                 Maryland   1      1   1
24            Massachusetts   1      1   1
25                 Michigan   1      1   0
26                Minnesota   0      0   1
27              Mississippi   0      0   0
28                 Missouri   1      0   0
29                  Montana   1      0   0
30                 Nebraska   1      0   0
31                   Nevada   1      0   0
32            New Hampshire   0      0   0
33               New Jersey   1      1   1
34               New Mexico   0      0   0
35                 New York   0      0   1
36           North Carolina   1      0   1
37             North Dakota   1      0   0
38 Northern Mariana Islands   0      0   0
39                     Ohio   1      1   0
40                 Oklahoma   0      1   0
41                   Oregon   0      0   0
42             Pennsylvania   0      1   1
43              Puerto Rico   0      0   0
44             Rhode Island   1      1   1
45           South Carolina   0      0   0
46             South Dakota   0      0   0
47                Tennessee   1      0   0
48                    Texas   1      0   0
49      U.S. Virgin Islands   0      0   0
50                     Utah   0      1   0
51                  Vermont   1      1   1
52                 Virginia   0      1   0
53               Washington   1      0   0
54            West Virginia   0      0   0
55                Wisconsin   0      0   0
56                  Wyoming   1      0   0</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>insights_q5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 1
  statement                                                                     
  &lt;chr&gt;                                                                         
1 13 states with active CDOs also have design systems or DSTs. They are Arizona…
2 States with Chief Data Officers are 3.4x more likely to have digital service …</code></pre>
</div>
</div></div>
</section>
<section id="q6" class="level3">
<h3 class="anchored" data-anchor-id="q6">Q6</h3>
<ul>
<li>Are states with <strong>AI legislation</strong> more likely to have other forms of digital infrastructure (DST, design systems)?</li>
</ul>
<p>I defined “digital infrastructure” broadly as the presence of any of the following: a CDO, DST, Digital Service Impact Report, or design system. I then compared the probability of having this infrastructure between states with versus without executive orders, AI legislation, or any policy (executive order or AI). Likelihood ratios were calculated to quantify differences, and notable examples were listed.</p>
<div class="cell-container code-fold"><div class="cell-decorator"><pre>In [10]:</pre></div><div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr); <span class="fu">library</span>(here)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr); <span class="fu">library</span>(glue)</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Load</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>map_data_clean <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"map_data_clean.rds"</span>))</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Prep (one row/state; presence 0/1)</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>q6_tbl <span class="ot">&lt;-</span> map_data_clean <span class="sc">%&gt;%</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(state_territory, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>    state_territory,</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">eo     =</span> <span class="fu">as.integer</span>(<span class="fu">coalesce</span>(executive_orders,          <span class="dv">0</span>L) <span class="sc">&gt;=</span> <span class="dv">1</span>L),</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">ai     =</span> <span class="fu">as.integer</span>(<span class="fu">coalesce</span>(ai_legislations,           <span class="dv">0</span>L) <span class="sc">&gt;=</span> <span class="dv">1</span>L),</span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">cdo    =</span> <span class="fu">as.integer</span>(<span class="fu">coalesce</span>(chief_data_officers,       <span class="dv">0</span>L) <span class="sc">&gt;=</span> <span class="dv">1</span>L),</span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">dst    =</span> <span class="fu">as.integer</span>(<span class="fu">coalesce</span>(digital_service_teams,     <span class="dv">0</span>L) <span class="sc">&gt;=</span> <span class="dv">1</span>L),</span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">dsir   =</span> <span class="fu">as.integer</span>(<span class="fu">coalesce</span>(digital_service_impact_reports, <span class="dv">0</span>L) <span class="sc">&gt;=</span> <span class="dv">1</span>L),</span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">design =</span> <span class="fu">as.integer</span>(<span class="fu">coalesce</span>(design_systems,            <span class="dv">0</span>L) <span class="sc">&gt;=</span> <span class="dv">1</span>L)</span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># DEFINITION </span><span class="al">NOTE</span><span class="co">:</span></span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># "Digital infrastructure" = present if ANY of the following are present:</span></span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   CDO OR Digital Service Team (DST) OR Digital Service Impact Report (DSIR) OR Design system</span></span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">infra =</span> <span class="fu">as.integer</span>(cdo <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> dst <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> dsir <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> design <span class="sc">==</span> <span class="dv">1</span>),</span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">any_policy =</span> <span class="fu">as.integer</span>(eo <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> ai <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb43-26"><a href="#cb43-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-27"><a href="#cb43-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Helper: ratio + notable examples</span></span>
<span id="cb43-28"><a href="#cb43-28" aria-hidden="true" tabindex="-1"></a>calc_ratio <span class="ot">&lt;-</span> <span class="cf">function</span>(df, policy_col) {</span>
<span id="cb43-29"><a href="#cb43-29" aria-hidden="true" tabindex="-1"></a>  with_policy    <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(.data[[policy_col]] <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb43-30"><a href="#cb43-30" aria-hidden="true" tabindex="-1"></a>  without_policy <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(.data[[policy_col]] <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb43-31"><a href="#cb43-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-32"><a href="#cb43-32" aria-hidden="true" tabindex="-1"></a>  p_with    <span class="ot">&lt;-</span> <span class="fu">mean</span>(with_policy<span class="sc">$</span>infra <span class="sc">==</span> <span class="dv">1</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb43-33"><a href="#cb43-33" aria-hidden="true" tabindex="-1"></a>  p_without <span class="ot">&lt;-</span> <span class="fu">mean</span>(without_policy<span class="sc">$</span>infra <span class="sc">==</span> <span class="dv">1</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb43-34"><a href="#cb43-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-35"><a href="#cb43-35" aria-hidden="true" tabindex="-1"></a>  ratio <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(p_without <span class="sc">&gt;</span> <span class="dv">0</span>, p_with <span class="sc">/</span> p_without, <span class="cn">NA_real_</span>)</span>
<span id="cb43-36"><a href="#cb43-36" aria-hidden="true" tabindex="-1"></a>  ratio_text <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ratio), <span class="st">"undefined"</span>, <span class="fu">paste0</span>(<span class="fu">round</span>(ratio, <span class="dv">1</span>), <span class="st">"x more"</span>))</span>
<span id="cb43-37"><a href="#cb43-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-38"><a href="#cb43-38" aria-hidden="true" tabindex="-1"></a>  notable <span class="ot">&lt;-</span> with_policy <span class="sc">%&gt;%</span> <span class="fu">filter</span>(infra <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(state_territory)</span>
<span id="cb43-39"><a href="#cb43-39" aria-hidden="true" tabindex="-1"></a>  notable_text <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">length</span>(notable) <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="fu">paste</span>(notable, <span class="at">collapse =</span> <span class="st">", "</span>), <span class="st">"None"</span>)</span>
<span id="cb43-40"><a href="#cb43-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-41"><a href="#cb43-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">ratio_text =</span> ratio_text, <span class="at">notable_text =</span> notable_text)</span>
<span id="cb43-42"><a href="#cb43-42" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb43-43"><a href="#cb43-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-44"><a href="#cb43-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Ratios + statements</span></span>
<span id="cb43-45"><a href="#cb43-45" aria-hidden="true" tabindex="-1"></a>eo_stats  <span class="ot">&lt;-</span> <span class="fu">calc_ratio</span>(q6_tbl, <span class="st">"eo"</span>)</span>
<span id="cb43-46"><a href="#cb43-46" aria-hidden="true" tabindex="-1"></a>ai_stats  <span class="ot">&lt;-</span> <span class="fu">calc_ratio</span>(q6_tbl, <span class="st">"ai"</span>)</span>
<span id="cb43-47"><a href="#cb43-47" aria-hidden="true" tabindex="-1"></a>any_stats <span class="ot">&lt;-</span> <span class="fu">calc_ratio</span>(q6_tbl, <span class="st">"any_policy"</span>)</span>
<span id="cb43-48"><a href="#cb43-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-49"><a href="#cb43-49" aria-hidden="true" tabindex="-1"></a>insights_q6 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb43-50"><a href="#cb43-50" aria-hidden="true" tabindex="-1"></a>  <span class="at">statement =</span> <span class="fu">c</span>(</span>
<span id="cb43-51"><a href="#cb43-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glue</span>(<span class="st">"States with executive orders are {eo_stats$ratio_text} likely to have other forms of digital infrastructure (CDO, DST, Digital Service Impact Report, design system). Notable examples are {eo_stats$notable_text}."</span>),</span>
<span id="cb43-52"><a href="#cb43-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glue</span>(<span class="st">"States with AI legislation are {ai_stats$ratio_text} likely to have other forms of digital infrastructure (CDO, DST, Digital Service Impact Report, design system). Notable examples are {ai_stats$notable_text}."</span>),</span>
<span id="cb43-53"><a href="#cb43-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glue</span>(<span class="st">"States with any policy (AI legislation and/or executive orders) are {any_stats$ratio_text} likely to have other forms of digital infrastructure (CDO, DST, Digital Service Impact Report, design system). Notable examples are {any_stats$notable_text}."</span>)</span>
<span id="cb43-54"><a href="#cb43-54" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb43-55"><a href="#cb43-55" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb43-56"><a href="#cb43-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-57"><a href="#cb43-57" aria-hidden="true" tabindex="-1"></a><span class="co"># Save outputs</span></span>
<span id="cb43-58"><a href="#cb43-58" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(<span class="fu">here</span>(<span class="st">"output"</span>))) <span class="fu">dir.create</span>(<span class="fu">here</span>(<span class="st">"output"</span>), <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb43-59"><a href="#cb43-59" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(q6_tbl,      <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"state_counts_q6.csv"</span>))</span>
<span id="cb43-60"><a href="#cb43-60" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(insights_q6, <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"insights_q6.csv"</span>))</span>
<span id="cb43-61"><a href="#cb43-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-62"><a href="#cb43-62" aria-hidden="true" tabindex="-1"></a><span class="co"># Print results</span></span>
<span id="cb43-63"><a href="#cb43-63" aria-hidden="true" tabindex="-1"></a>q6_tbl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>            state_territory eo ai cdo dst dsir design infra any_policy
1                   Alabama  1  0   0   0    0      0     0          1
2                    Alaska  1  0   0   0    0      0     0          1
3            American Samoa  1  0   0   0    0      0     0          1
4                   Arizona  0  1   1   1    0      0     1          1
5                  Arkansas  0  1   1   0    0      0     1          1
6                California  1  1   1   1    1      1     1          1
7                  Colorado  1  1   1   1    1      1     1          1
8               Connecticut  1  1   1   1    0      1     1          1
9                  Delaware  1  1   1   1    0      1     1          1
10     District of Columbia  1  0   1   0    0      0     1          1
11                  Florida  1  1   1   0    0      0     1          1
12                  Georgia  1  1   0   0    0      1     1          1
13                     Guam  1  0   0   0    0      0     0          1
14                   Hawaii  1  1   1   0    0      0     1          1
15                    Idaho  1  1   0   0    0      0     0          1
16                 Illinois  1  1   0   0    0      1     1          1
17                  Indiana  1  1   1   0    0      0     1          1
18                     Iowa  1  0   0   0    0      1     1          1
19                   Kansas  1  0   1   0    0      0     1          1
20                 Kentucky  1  0   0   0    0      0     0          1
21                Louisiana  1  0   0   0    0      1     1          1
22                    Maine  0  1   1   0    0      0     1          1
23                 Maryland  1  1   1   1    0      1     1          1
24            Massachusetts  1  1   1   1    1      1     1          1
25                 Michigan  1  1   1   0    0      1     1          1
26                Minnesota  1  1   0   1    1      0     1          1
27              Mississippi  1  0   0   0    0      0     0          1
28                 Missouri  0  0   1   0    0      0     1          0
29                  Montana  1  0   1   0    0      0     1          1
30                 Nebraska  0  0   1   0    0      0     1          0
31                   Nevada  1  0   1   0    0      0     1          1
32            New Hampshire  1  1   0   0    0      0     0          1
33               New Jersey  1  1   1   1    1      1     1          1
34               New Mexico  1  0   0   0    0      0     0          1
35                 New York  1  1   0   1    1      0     1          1
36           North Carolina  1  1   1   1    1      0     1          1
37             North Dakota  1  1   1   0    0      0     1          1
38 Northern Mariana Islands  1  0   0   0    0      0     0          1
39                     Ohio  1  1   1   0    0      1     1          1
40                 Oklahoma  1  0   0   0    0      1     1          1
41                   Oregon  1  0   0   0    0      0     0          1
42             Pennsylvania  1  0   0   1    0      1     1          1
43              Puerto Rico  0  0   0   0    0      0     0          0
44             Rhode Island  1  0   1   1    0      1     1          1
45           South Carolina  1  0   0   0    0      0     0          1
46             South Dakota  0  0   0   0    0      0     0          0
47                Tennessee  0  1   1   0    0      0     1          1
48                    Texas  1  1   1   0    0      0     1          1
49      U.S. Virgin Islands  0  1   0   0    0      0     0          1
50                     Utah  1  1   0   0    0      1     1          1
51                  Vermont  1  1   1   1    0      1     1          1
52                 Virginia  1  1   0   0    0      1     1          1
53               Washington  1  1   1   0    0      0     1          1
54            West Virginia  1  1   0   0    0      0     0          1
55                Wisconsin  1  0   0   0    0      0     0          1
56                  Wyoming  1  0   1   0    0      0     1          1</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>insights_q6</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 1
  statement                                                                     
  &lt;chr&gt;                                                                         
1 States with executive orders are 1.1x more likely to have other forms of digi…
2 States with AI legislation are 1.8x more likely to have other forms of digita…
3 States with any policy (AI legislation and/or executive orders) are 1.4x more…</code></pre>
</div>
</div></div>
</section>
<section id="q7" class="level3">
<h3 class="anchored" data-anchor-id="q7">Q7</h3>
<ul>
<li>In which region(s) do <strong>AI legislation policies cluster</strong> in?</li>
</ul>
<p>To assess whether AI legislation clusters in particular regions, I calculated both <strong>absolute counts</strong> and <strong>relative proportions</strong>. First, I assigned each state or territory to its CDC region grouping and flagged whether it had AI legislation. I then aggregated by region to count the number of states with AI legislation (absolute clustering) and the percentage of states within the region that had AI legislation (relative clustering). Absolute counts highlight where most AI laws are located overall, while proportions account for differences in region size.</p>
<div class="cell-container code-fold"><div class="cell-decorator"><pre>In [11]:</pre></div><div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr); <span class="fu">library</span>(here)</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr); <span class="fu">library</span>(glue); <span class="fu">library</span>(tidyr)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 1) Load</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>map_data_clean <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"map_data_clean.rds"</span>))</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) Prep: one row per state/territory with region + AI presence (0/1)</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>q7_tbl <span class="ot">&lt;-</span> map_data_clean <span class="sc">%&gt;%</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(state_territory, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>    state_territory,</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">region =</span> <span class="fu">as.character</span>(region),</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">ai_legislation =</span> <span class="fu">as.integer</span>(dplyr<span class="sc">::</span><span class="fu">coalesce</span>(ai_legislations, <span class="dv">0</span>L) <span class="sc">&gt;=</span> <span class="dv">1</span>L)</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a><span class="co"># 3) Summarize by region: counts and proportions</span></span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>region_ai_counts <span class="ot">&lt;-</span> q7_tbl <span class="sc">%&gt;%</span></span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(region) <span class="sc">%&gt;%</span></span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_states       =</span> <span class="fu">n</span>(),</span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">ai_states      =</span> <span class="fu">sum</span>(ai_legislation, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent_with_ai=</span> <span class="fu">round</span>(<span class="dv">100</span> <span class="sc">*</span> ai_states <span class="sc">/</span> n_states, <span class="dv">1</span>),</span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(ai_states), <span class="fu">desc</span>(percent_with_ai))</span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true" tabindex="-1"></a><span class="co"># 4) Identify clustering by absolute count and by proportion (tie-aware)</span></span>
<span id="cb47-28"><a href="#cb47-28" aria-hidden="true" tabindex="-1"></a>max_count <span class="ot">&lt;-</span> <span class="fu">max</span>(region_ai_counts<span class="sc">$</span>ai_states, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb47-29"><a href="#cb47-29" aria-hidden="true" tabindex="-1"></a>max_prop  <span class="ot">&lt;-</span> <span class="fu">max</span>(region_ai_counts<span class="sc">$</span>percent_with_ai, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb47-30"><a href="#cb47-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-31"><a href="#cb47-31" aria-hidden="true" tabindex="-1"></a>cluster_count_regions <span class="ot">&lt;-</span> region_ai_counts <span class="sc">%&gt;%</span></span>
<span id="cb47-32"><a href="#cb47-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ai_states <span class="sc">==</span> max_count) <span class="sc">%&gt;%</span></span>
<span id="cb47-33"><a href="#cb47-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(region)</span>
<span id="cb47-34"><a href="#cb47-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-35"><a href="#cb47-35" aria-hidden="true" tabindex="-1"></a>cluster_prop_regions <span class="ot">&lt;-</span> region_ai_counts <span class="sc">%&gt;%</span></span>
<span id="cb47-36"><a href="#cb47-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(percent_with_ai <span class="sc">==</span> max_prop) <span class="sc">%&gt;%</span></span>
<span id="cb47-37"><a href="#cb47-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(region)</span>
<span id="cb47-38"><a href="#cb47-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-39"><a href="#cb47-39" aria-hidden="true" tabindex="-1"></a>fmt_regions <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">paste</span>(x, <span class="at">collapse =</span> <span class="st">", "</span>)</span>
<span id="cb47-40"><a href="#cb47-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-41"><a href="#cb47-41" aria-hidden="true" tabindex="-1"></a><span class="co"># 5) Insight statements (both views)</span></span>
<span id="cb47-42"><a href="#cb47-42" aria-hidden="true" tabindex="-1"></a>insights_q7 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb47-43"><a href="#cb47-43" aria-hidden="true" tabindex="-1"></a>  <span class="at">statement =</span> <span class="fu">c</span>(</span>
<span id="cb47-44"><a href="#cb47-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glue</span>(<span class="st">"By absolute count, AI legislation tends to cluster in the {fmt_regions(cluster_count_regions)}."</span>),</span>
<span id="cb47-45"><a href="#cb47-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glue</span>(<span class="st">"By share of states, AI legislation tends to cluster in the {fmt_regions(cluster_prop_regions)}."</span>)</span>
<span id="cb47-46"><a href="#cb47-46" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb47-47"><a href="#cb47-47" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb47-48"><a href="#cb47-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-49"><a href="#cb47-49" aria-hidden="true" tabindex="-1"></a><span class="co"># 6) Save</span></span>
<span id="cb47-50"><a href="#cb47-50" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(<span class="fu">here</span>(<span class="st">"output"</span>))) <span class="fu">dir.create</span>(<span class="fu">here</span>(<span class="st">"output"</span>), <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb47-51"><a href="#cb47-51" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(region_ai_counts, <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"region_ai_counts_q7.csv"</span>))</span>
<span id="cb47-52"><a href="#cb47-52" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(insights_q7,      <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"insights_q7.csv"</span>))</span>
<span id="cb47-53"><a href="#cb47-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-54"><a href="#cb47-54" aria-hidden="true" tabindex="-1"></a><span class="co"># 7) Print</span></span>
<span id="cb47-55"><a href="#cb47-55" aria-hidden="true" tabindex="-1"></a>region_ai_counts</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  region      n_states ai_states percent_with_ai
  &lt;chr&gt;          &lt;int&gt;     &lt;int&gt;           &lt;dbl&gt;
1 South             17        10            58.8
2 Northeast          9         7            77.8
3 West              13         7            53.8
4 Midwest           12         6            50  
5 Territories        5         1            20  </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>insights_q7</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 1
  statement                                                            
  &lt;chr&gt;                                                                
1 By absolute count, AI legislation tends to cluster in the South.     
2 By share of states, AI legislation tends to cluster in the Northeast.</code></pre>
</div>
</div></div>
</section>
<section id="q8" class="level3">
<h3 class="anchored" data-anchor-id="q8">Q8</h3>
<ul>
<li>What are the <strong>most common policy topics</strong> in executive orders (e.g., broadband, interoperability, AI)?</li>
</ul>
<p>I parsed <code>executive_order_last_topic_tag_s</code> by normalizing separators (commas/semicolons → semicolons), splitting multi-topic strings into individual rows, trimming whitespace, and standardizing to title case. I then counted topic frequencies across all executive orders to identify the most and least common topics. For the word cloud, I used the <code>wordcloud</code> package with a fixed seed for reproducibility, scaling word size by frequency and using a categorical palette (no stemming or stop-word removal, because these are curated tags rather than free text).</p>
<div class="cell-container code-fold"><div class="cell-decorator"><pre>In [12]:</pre></div><div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr); <span class="fu">library</span>(here)</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr); <span class="fu">library</span>(tidyr); <span class="fu">library</span>(stringr); <span class="fu">library</span>(glue)</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wordcloud); <span class="fu">library</span>(RColorBrewer)</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 1) Load</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>policy_data_clean <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"policy_data_clean.rds"</span>))</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) Extract + clean EO topics (split multi-tags, normalize separators/spaces/case)</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>eo_topics <span class="ot">&lt;-</span> policy_data_clean <span class="sc">%&gt;%</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(executive_order_last_topic_tag_s)) <span class="sc">%&gt;%</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">topic_str =</span> <span class="fu">str_replace_all</span>(executive_order_last_topic_tag_s, <span class="st">"[,|;]"</span>, <span class="st">";"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_rows</span>(topic_str, <span class="at">sep =</span> <span class="st">";"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">topic =</span> <span class="fu">str_squish</span>(<span class="fu">str_to_title</span>(topic_str))) <span class="sc">%&gt;%</span></span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(topic <span class="sc">!=</span> <span class="st">""</span>)</span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a><span class="co"># 3) Count topic frequency</span></span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a>topic_counts <span class="ot">&lt;-</span> eo_topics <span class="sc">%&gt;%</span></span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(topic, <span class="at">sort =</span> <span class="cn">TRUE</span>, <span class="at">name =</span> <span class="st">"count"</span>)</span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true" tabindex="-1"></a><span class="co"># 4) Top/Bottom 10 (ties kept)</span></span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true" tabindex="-1"></a>top10_topics    <span class="ot">&lt;-</span> topic_counts <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(count, <span class="at">n =</span> <span class="dv">10</span>, <span class="at">with_ties =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-22"><a href="#cb51-22" aria-hidden="true" tabindex="-1"></a>bottom10_topics <span class="ot">&lt;-</span> topic_counts <span class="sc">%&gt;%</span> <span class="fu">slice_min</span>(count, <span class="at">n =</span> <span class="dv">10</span>, <span class="at">with_ties =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-23"><a href="#cb51-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-24"><a href="#cb51-24" aria-hidden="true" tabindex="-1"></a>insights_q8 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb51-25"><a href="#cb51-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">statement =</span> <span class="fu">c</span>(</span>
<span id="cb51-26"><a href="#cb51-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glue</span>(<span class="st">"The 10 most common policy topics in executive orders are: {paste(top10_topics$topic, collapse = ', ')}."</span>),</span>
<span id="cb51-27"><a href="#cb51-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glue</span>(<span class="st">"The 10 least common policy topics in executive orders are: {paste(bottom10_topics$topic, collapse = ', ')}."</span>)</span>
<span id="cb51-28"><a href="#cb51-28" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-29"><a href="#cb51-29" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-30"><a href="#cb51-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-31"><a href="#cb51-31" aria-hidden="true" tabindex="-1"></a><span class="co"># 5) Save tables</span></span>
<span id="cb51-32"><a href="#cb51-32" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(<span class="fu">here</span>(<span class="st">"output"</span>))) <span class="fu">dir.create</span>(<span class="fu">here</span>(<span class="st">"output"</span>), <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-33"><a href="#cb51-33" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(topic_counts,    <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"eo_topic_counts_q8.csv"</span>))</span>
<span id="cb51-34"><a href="#cb51-34" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(insights_q8,     <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"insights_q8.csv"</span>))</span>
<span id="cb51-35"><a href="#cb51-35" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(top10_topics,    <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"eo_top10_topics_q8.csv"</span>))</span>
<span id="cb51-36"><a href="#cb51-36" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(bottom10_topics, <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"eo_bottom10_topics_q8.csv"</span>))</span>
<span id="cb51-37"><a href="#cb51-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-38"><a href="#cb51-38" aria-hidden="true" tabindex="-1"></a><span class="co"># 6) Word cloud PNG (deterministic)</span></span>
<span id="cb51-39"><a href="#cb51-39" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb51-40"><a href="#cb51-40" aria-hidden="true" tabindex="-1"></a><span class="fu">png</span>(<span class="at">filename =</span> <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"eo_topics_wordcloud_q8.png"</span>),</span>
<span id="cb51-41"><a href="#cb51-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="dv">1400</span>, <span class="at">height =</span> <span class="dv">1000</span>, <span class="at">res =</span> <span class="dv">150</span>, <span class="at">bg =</span> <span class="st">"white"</span>)</span>
<span id="cb51-42"><a href="#cb51-42" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressWarnings</span>(</span>
<span id="cb51-43"><a href="#cb51-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">wordcloud</span>(<span class="at">words =</span> topic_counts<span class="sc">$</span>topic,</span>
<span id="cb51-44"><a href="#cb51-44" aria-hidden="true" tabindex="-1"></a>            <span class="at">freq  =</span> topic_counts<span class="sc">$</span>count,</span>
<span id="cb51-45"><a href="#cb51-45" aria-hidden="true" tabindex="-1"></a>            <span class="at">min.freq =</span> <span class="dv">1</span>,</span>
<span id="cb51-46"><a href="#cb51-46" aria-hidden="true" tabindex="-1"></a>            <span class="at">max.words =</span> <span class="dv">200</span>,</span>
<span id="cb51-47"><a href="#cb51-47" aria-hidden="true" tabindex="-1"></a>            <span class="at">random.order =</span> <span class="cn">FALSE</span>,</span>
<span id="cb51-48"><a href="#cb51-48" aria-hidden="true" tabindex="-1"></a>            <span class="at">rot.per =</span> <span class="fl">0.10</span>,</span>
<span id="cb51-49"><a href="#cb51-49" aria-hidden="true" tabindex="-1"></a>            <span class="at">scale =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="fl">0.8</span>),</span>
<span id="cb51-50"><a href="#cb51-50" aria-hidden="true" tabindex="-1"></a>            <span class="at">colors =</span> <span class="fu">brewer.pal</span>(<span class="dv">8</span>, <span class="st">"Dark2"</span>))</span>
<span id="cb51-51"><a href="#cb51-51" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-52"><a href="#cb51-52" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>quartz_off_screen 
                2 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 7) Print in document</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>topic_counts</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 36 × 2
   topic                         count
   &lt;chr&gt;                         &lt;int&gt;
 1 Cybersecurity                    52
 2 Information Technology           45
 3 Broadband                        38
 4 Administrative Reorganization    29
 5 Interoperability                 29
 6 Website/Portal                   28
 7 Technology Modernization         17
 8 Data Sharing                     14
 9 Procurement                      13
10 Public Safety                    13
# ℹ 26 more rows</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>insights_q8</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 1
  statement                                                                     
  &lt;chr&gt;                                                                         
1 The 10 most common policy topics in executive orders are: Cybersecurity, Info…
2 The 10 least common policy topics in executive orders are: Agile/Lean Operati…</code></pre>
</div>
</div></div>
</section>
<section id="q9" class="level3">
<h3 class="anchored" data-anchor-id="q9">Q9</h3>
<ul>
<li>What are the <strong>most common policy topics</strong> in AI legislations orders (e.g., broadband, interoperability, AI)?</li>
</ul>
<p>I analyzed policy topics in AI legislations using the <code>bill_topic_tag_s_text</code> field. I normalized multi-topic strings (commas/semicolons → semicolons), split into individual tags, trimmed for whitespace, and standardized to title case. Because every law in this dataset is inherently about artificial intelligence, I excluded the term <em>“Artificial Intelligence”</em> to avoid inflating its frequency. Topics were then tallied across all AI legislations to identify the most and least common. For visualization, I generated a word cloud with word size scaled by topic frequency and colors drawn from a categorical palette. A fixed random seed ensures reproducibility.</p>
<div class="cell-container code-fold"><div class="cell-decorator"><pre>In [13]:</pre></div><div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr); <span class="fu">library</span>(here)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr); <span class="fu">library</span>(tidyr); <span class="fu">library</span>(stringr); <span class="fu">library</span>(glue)</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wordcloud); <span class="fu">library</span>(RColorBrewer)</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 1) Load</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>policy_data_clean <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"policy_data_clean.rds"</span>))</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) Extract + clean AI legislation topics</span></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Variable of interest: bill_topic_tag_s_text (multi-value tags)</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>ai_topics <span class="ot">&lt;-</span> policy_data_clean <span class="sc">%&gt;%</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(bill_topic_tag_s_text)) <span class="sc">%&gt;%</span></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">topic_str =</span> <span class="fu">str_replace_all</span>(bill_topic_tag_s_text, <span class="st">"[,|;]"</span>, <span class="st">";"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_rows</span>(topic_str, <span class="at">sep =</span> <span class="st">";"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">topic =</span> <span class="fu">str_squish</span>(<span class="fu">str_to_title</span>(topic_str))) <span class="sc">%&gt;%</span></span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(topic <span class="sc">!=</span> <span class="st">""</span>) <span class="sc">%&gt;%</span></span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(topic <span class="sc">!=</span> <span class="st">"Artificial Intelligence"</span>)   <span class="co"># remove base term to avoid inflation</span></span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a><span class="co"># 3) Count frequency</span></span>
<span id="cb57-19"><a href="#cb57-19" aria-hidden="true" tabindex="-1"></a>ai_topic_counts <span class="ot">&lt;-</span> ai_topics <span class="sc">%&gt;%</span></span>
<span id="cb57-20"><a href="#cb57-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(topic, <span class="at">sort =</span> <span class="cn">TRUE</span>, <span class="at">name =</span> <span class="st">"count"</span>)</span>
<span id="cb57-21"><a href="#cb57-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-22"><a href="#cb57-22" aria-hidden="true" tabindex="-1"></a><span class="co"># 4) Top/Bottom 10 (ties kept)</span></span>
<span id="cb57-23"><a href="#cb57-23" aria-hidden="true" tabindex="-1"></a>top10_ai_topics    <span class="ot">&lt;-</span> ai_topic_counts <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(count, <span class="at">n =</span> <span class="dv">10</span>, <span class="at">with_ties =</span> <span class="cn">TRUE</span>)</span>
<span id="cb57-24"><a href="#cb57-24" aria-hidden="true" tabindex="-1"></a>bottom10_ai_topics <span class="ot">&lt;-</span> ai_topic_counts <span class="sc">%&gt;%</span> <span class="fu">slice_min</span>(count, <span class="at">n =</span> <span class="dv">10</span>, <span class="at">with_ties =</span> <span class="cn">TRUE</span>)</span>
<span id="cb57-25"><a href="#cb57-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-26"><a href="#cb57-26" aria-hidden="true" tabindex="-1"></a>insights_q9 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb57-27"><a href="#cb57-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">statement =</span> <span class="fu">c</span>(</span>
<span id="cb57-28"><a href="#cb57-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glue</span>(<span class="st">"The 10 most common policy topics in AI legislations are: {paste(top10_ai_topics$topic, collapse = ', ')}."</span>),</span>
<span id="cb57-29"><a href="#cb57-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glue</span>(<span class="st">"The 10 least common policy topics in AI legislations are: {paste(bottom10_ai_topics$topic, collapse = ', ')}."</span>)</span>
<span id="cb57-30"><a href="#cb57-30" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-31"><a href="#cb57-31" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb57-32"><a href="#cb57-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-33"><a href="#cb57-33" aria-hidden="true" tabindex="-1"></a><span class="co"># 5) Save tables</span></span>
<span id="cb57-34"><a href="#cb57-34" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(<span class="fu">here</span>(<span class="st">"output"</span>))) <span class="fu">dir.create</span>(<span class="fu">here</span>(<span class="st">"output"</span>), <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb57-35"><a href="#cb57-35" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(ai_topic_counts,    <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"ai_topic_counts_q9.csv"</span>))</span>
<span id="cb57-36"><a href="#cb57-36" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(insights_q9,        <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"insights_q9.csv"</span>))</span>
<span id="cb57-37"><a href="#cb57-37" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(top10_ai_topics,    <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"ai_top10_topics_q9.csv"</span>))</span>
<span id="cb57-38"><a href="#cb57-38" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(bottom10_ai_topics, <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"ai_bottom10_topics_q9.csv"</span>))</span>
<span id="cb57-39"><a href="#cb57-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-40"><a href="#cb57-40" aria-hidden="true" tabindex="-1"></a><span class="co"># 6) Word cloud PNG (deterministic)</span></span>
<span id="cb57-41"><a href="#cb57-41" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb57-42"><a href="#cb57-42" aria-hidden="true" tabindex="-1"></a><span class="fu">png</span>(<span class="at">filename =</span> <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"ai_topics_wordcloud_q9.png"</span>),</span>
<span id="cb57-43"><a href="#cb57-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="dv">1400</span>, <span class="at">height =</span> <span class="dv">1000</span>, <span class="at">res =</span> <span class="dv">150</span>, <span class="at">bg =</span> <span class="st">"white"</span>)</span>
<span id="cb57-44"><a href="#cb57-44" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressWarnings</span>(</span>
<span id="cb57-45"><a href="#cb57-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">wordcloud</span>(<span class="at">words =</span> ai_topic_counts<span class="sc">$</span>topic,</span>
<span id="cb57-46"><a href="#cb57-46" aria-hidden="true" tabindex="-1"></a>            <span class="at">freq  =</span> ai_topic_counts<span class="sc">$</span>count,</span>
<span id="cb57-47"><a href="#cb57-47" aria-hidden="true" tabindex="-1"></a>            <span class="at">min.freq =</span> <span class="dv">1</span>,</span>
<span id="cb57-48"><a href="#cb57-48" aria-hidden="true" tabindex="-1"></a>            <span class="at">max.words =</span> <span class="dv">200</span>,</span>
<span id="cb57-49"><a href="#cb57-49" aria-hidden="true" tabindex="-1"></a>            <span class="at">random.order =</span> <span class="cn">FALSE</span>,</span>
<span id="cb57-50"><a href="#cb57-50" aria-hidden="true" tabindex="-1"></a>            <span class="at">rot.per =</span> <span class="fl">0.10</span>,</span>
<span id="cb57-51"><a href="#cb57-51" aria-hidden="true" tabindex="-1"></a>            <span class="at">scale =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="fl">0.8</span>),</span>
<span id="cb57-52"><a href="#cb57-52" aria-hidden="true" tabindex="-1"></a>            <span class="at">colors =</span> <span class="fu">brewer.pal</span>(<span class="dv">8</span>, <span class="st">"Dark2"</span>))</span>
<span id="cb57-53"><a href="#cb57-53" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb57-54"><a href="#cb57-54" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>quartz_off_screen 
                2 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 7) Print in document</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>ai_topic_counts</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21 × 2
   topic                 count
   &lt;chr&gt;                 &lt;int&gt;
 1 Criminal/Legal System    11
 2 Education                10
 3 Civil Rights              8
 4 Public Health             8
 5 Public Safety             8
 6 Voting/Elections          3
 7 Blockchain                2
 8 Data Governance           2
 9 Data Privacy              2
10 Emergency Management      2
# ℹ 11 more rows</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>insights_q9</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 1
  statement                                                                     
  &lt;chr&gt;                                                                         
1 The 10 most common policy topics in AI legislations are: Criminal/Legal Syste…
2 The 10 least common policy topics in AI legislations are: Administrative Reor…</code></pre>
</div>
</div></div>
</section>
<section id="q10" class="level3">
<h3 class="anchored" data-anchor-id="q10">Q10</h3>
<ul>
<li>What is the <strong>trend over time</strong> in the number of executive orders and AI legislations enacted?</li>
</ul>
<p>I examined temporal trends by counting the number of executive orders and AI legislations enacted each year. For executive orders, I used the <code>executive_order_year_enacted</code> variable; for AI legislations, I used the <code>legislative_session</code> variable. Counts were aggregated by year, with missing years filled as zeros to provide a continuous timeline. I then described whether activity has generally increased, decreased, or remained the same by looking at the overall slope of that line (positive/negative/flat) for the overall pattern of counts across time.</p>
<div class="cell-container code-fold"><div class="cell-decorator"><pre>In [14]:</pre></div><div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr); <span class="fu">library</span>(here)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr); <span class="fu">library</span>(tidyr); <span class="fu">library</span>(stringr); <span class="fu">library</span>(glue)</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 1) Load</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>policy_data_clean <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"policy_data_clean.rds"</span>))</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) Normalize scan_type and build yearly counts for both series</span></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> policy_data_clean <span class="sc">%&gt;%</span></span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">scan_type_norm =</span> <span class="fu">str_to_lower</span>(<span class="fu">str_squish</span>(scan_type)))</span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>eo_by_year <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span></span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(scan_type_norm, <span class="st">"executive"</span>),</span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a>         <span class="sc">!</span><span class="fu">is.na</span>(executive_order_year_enacted)) <span class="sc">%&gt;%</span></span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(<span class="at">year =</span> <span class="fu">as.integer</span>(executive_order_year_enacted)) <span class="sc">%&gt;%</span></span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(year, <span class="at">name =</span> <span class="st">"count"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">type =</span> <span class="st">"Executive orders"</span>)</span>
<span id="cb63-17"><a href="#cb63-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-18"><a href="#cb63-18" aria-hidden="true" tabindex="-1"></a>ai_by_year <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span></span>
<span id="cb63-19"><a href="#cb63-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(scan_type_norm, <span class="st">"legis"</span>),</span>
<span id="cb63-20"><a href="#cb63-20" aria-hidden="true" tabindex="-1"></a>         <span class="sc">!</span><span class="fu">is.na</span>(legislative_session)) <span class="sc">%&gt;%</span></span>
<span id="cb63-21"><a href="#cb63-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(<span class="at">year =</span> <span class="fu">as.integer</span>(legislative_session)) <span class="sc">%&gt;%</span></span>
<span id="cb63-22"><a href="#cb63-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(year, <span class="at">name =</span> <span class="st">"count"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb63-23"><a href="#cb63-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">type =</span> <span class="st">"AI legislations"</span>)</span>
<span id="cb63-24"><a href="#cb63-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-25"><a href="#cb63-25" aria-hidden="true" tabindex="-1"></a><span class="co"># 3) Fill missing years with zero so both series span the same axis</span></span>
<span id="cb63-26"><a href="#cb63-26" aria-hidden="true" tabindex="-1"></a>all_years <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">unique</span>(<span class="fu">c</span>(eo_by_year<span class="sc">$</span>year, ai_by_year<span class="sc">$</span>year)))</span>
<span id="cb63-27"><a href="#cb63-27" aria-hidden="true" tabindex="-1"></a>trend_wide <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">year =</span> all_years) <span class="sc">%&gt;%</span></span>
<span id="cb63-28"><a href="#cb63-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="fu">select</span>(eo_by_year, year, <span class="at">eo =</span> count), <span class="at">by =</span> <span class="st">"year"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb63-29"><a href="#cb63-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="fu">select</span>(ai_by_year, year, <span class="at">ai =</span> count), <span class="at">by =</span> <span class="st">"year"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb63-30"><a href="#cb63-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(eo, ai), <span class="sc">~</span> <span class="fu">replace_na</span>(., <span class="dv">0</span>L)))</span>
<span id="cb63-31"><a href="#cb63-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-32"><a href="#cb63-32" aria-hidden="true" tabindex="-1"></a>trend_long <span class="ot">&lt;-</span> trend_wide <span class="sc">%&gt;%</span></span>
<span id="cb63-33"><a href="#cb63-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(eo, ai), <span class="at">names_to =</span> <span class="st">"series"</span>, <span class="at">values_to =</span> <span class="st">"count"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb63-34"><a href="#cb63-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">type =</span> <span class="fu">recode</span>(series, <span class="at">eo =</span> <span class="st">"Executive orders"</span>, <span class="at">ai =</span> <span class="st">"AI legislations"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb63-35"><a href="#cb63-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, type, count) <span class="sc">%&gt;%</span></span>
<span id="cb63-36"><a href="#cb63-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, type)</span>
<span id="cb63-37"><a href="#cb63-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-38"><a href="#cb63-38" aria-hidden="true" tabindex="-1"></a><span class="co"># 4) Direction statements via simple linear trend on filled series</span></span>
<span id="cb63-39"><a href="#cb63-39" aria-hidden="true" tabindex="-1"></a>slope_dir <span class="ot">&lt;-</span> <span class="cf">function</span>(x_year, y_count) {</span>
<span id="cb63-40"><a href="#cb63-40" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(<span class="fu">unique</span>(x_year)) <span class="sc">&lt;</span> <span class="dv">2</span>) <span class="fu">return</span>(<span class="st">"remained the same"</span>)</span>
<span id="cb63-41"><a href="#cb63-41" aria-hidden="true" tabindex="-1"></a>  s <span class="ot">&lt;-</span> <span class="fu">coef</span>(<span class="fu">lm</span>(y_count <span class="sc">~</span> x_year))[<span class="dv">2</span>]</span>
<span id="cb63-42"><a href="#cb63-42" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.na</span>(s) <span class="sc">||</span> <span class="fu">abs</span>(s) <span class="sc">&lt;</span> <span class="fl">1e-9</span>) <span class="st">"remained the same"</span> <span class="cf">else</span> <span class="cf">if</span> (s <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="st">"increased"</span> <span class="cf">else</span> <span class="st">"decreased"</span></span>
<span id="cb63-43"><a href="#cb63-43" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb63-44"><a href="#cb63-44" aria-hidden="true" tabindex="-1"></a>eo_dir <span class="ot">&lt;-</span> <span class="fu">slope_dir</span>(trend_wide<span class="sc">$</span>year, trend_wide<span class="sc">$</span>eo)</span>
<span id="cb63-45"><a href="#cb63-45" aria-hidden="true" tabindex="-1"></a>ai_dir <span class="ot">&lt;-</span> <span class="fu">slope_dir</span>(trend_wide<span class="sc">$</span>year, trend_wide<span class="sc">$</span>ai)</span>
<span id="cb63-46"><a href="#cb63-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-47"><a href="#cb63-47" aria-hidden="true" tabindex="-1"></a>insights_q10 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb63-48"><a href="#cb63-48" aria-hidden="true" tabindex="-1"></a>  <span class="at">statement =</span> <span class="fu">c</span>(</span>
<span id="cb63-49"><a href="#cb63-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glue</span>(<span class="st">"On average, the number of executive orders around digital transformation in government have {eo_dir} over the years."</span>),</span>
<span id="cb63-50"><a href="#cb63-50" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glue</span>(<span class="st">"On average, the number of AI legislations around digital transformation in government have {ai_dir} over the years."</span>)</span>
<span id="cb63-51"><a href="#cb63-51" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb63-52"><a href="#cb63-52" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb63-53"><a href="#cb63-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-54"><a href="#cb63-54" aria-hidden="true" tabindex="-1"></a><span class="co"># 5) Save + print</span></span>
<span id="cb63-55"><a href="#cb63-55" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(<span class="fu">here</span>(<span class="st">"output"</span>))) <span class="fu">dir.create</span>(<span class="fu">here</span>(<span class="st">"output"</span>), <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb63-56"><a href="#cb63-56" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(trend_long,   <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"trend_data_q10.csv"</span>))</span>
<span id="cb63-57"><a href="#cb63-57" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(insights_q10, <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"insights_q10.csv"</span>))</span>
<span id="cb63-58"><a href="#cb63-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-59"><a href="#cb63-59" aria-hidden="true" tabindex="-1"></a>trend_long</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 26 × 3
    year type             count
   &lt;int&gt; &lt;chr&gt;            &lt;int&gt;
 1  2013 AI legislations      0
 2  2013 Executive orders    26
 3  2014 AI legislations      0
 4  2014 Executive orders    22
 5  2015 AI legislations      0
 6  2015 Executive orders    34
 7  2016 AI legislations      0
 8  2016 Executive orders    24
 9  2017 AI legislations      0
10  2017 Executive orders    34
# ℹ 16 more rows</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>insights_q10</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 1
  statement                                                                     
  &lt;chr&gt;                                                                         
1 On average, the number of executive orders around digital transformation in g…
2 On average, the number of AI legislations around digital transformation in go…</code></pre>
</div>
</div></div>
</section>
<section id="q11" class="level3">
<h3 class="anchored" data-anchor-id="q11">Q11</h3>
<ul>
<li>Do certain AI legislation topics <strong>cluster in certain regions</strong>? Do certain executive topics topics cluster in certain regions?</li>
</ul>
<p>For executive orders, I used the <code>executive_order_last_topic_tag_s</code> variable, and for AI legislation, I used the <code>bill_topic_tag_s_text</code> variable. Multi-topic strings were split on commas and semicolons, trimmed, and normalized. For AI legislation, I removed the generic tag “artificial intelligence” since the dataset itself is scoped to AI-related laws, and including it would artificially inflate its frequency. I then counted topic mentions by region and reported the top five most common executive order topics and top five AI legislation topics for each region , with word size proportional to topic frequency. The results are reported as paired statements by region.</p>
<div class="cell-container code-fold"><div class="cell-decorator"><pre>In [15]:</pre></div><div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr); <span class="fu">library</span>(here)</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr); <span class="fu">library</span>(tidyr); <span class="fu">library</span>(stringr); <span class="fu">library</span>(glue)</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wordcloud); <span class="fu">library</span>(RColorBrewer)</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 1) Load</span></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>policy_data_clean <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"policy_data_clean.rds"</span>))</span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) Helper: safe filename</span></span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a>slug <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">|&gt;</span> <span class="fu">tolower</span>() <span class="sc">|&gt;</span> <span class="fu">str_replace_all</span>(<span class="st">"[^a-z0-9]+"</span>, <span class="st">"_"</span>) <span class="sc">|&gt;</span> <span class="fu">str_replace_all</span>(<span class="st">"^_|_$"</span>, <span class="st">""</span>)</span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 3) Executive order topics by region (split inline; no map/list-cols)</span></span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a>eo_topics_by_region <span class="ot">&lt;-</span> policy_data_clean <span class="sc">%&gt;%</span></span>
<span id="cb67-16"><a href="#cb67-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(region), <span class="sc">!</span><span class="fu">is.na</span>(executive_order_last_topic_tag_s)) <span class="sc">%&gt;%</span></span>
<span id="cb67-17"><a href="#cb67-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(region,</span>
<span id="cb67-18"><a href="#cb67-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">topic =</span> executive_order_last_topic_tag_s) <span class="sc">%&gt;%</span></span>
<span id="cb67-19"><a href="#cb67-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_rows</span>(topic, <span class="at">sep =</span> <span class="st">"[,;]"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb67-20"><a href="#cb67-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">topic =</span> <span class="fu">str_squish</span>(<span class="fu">str_to_title</span>(topic))) <span class="sc">%&gt;%</span></span>
<span id="cb67-21"><a href="#cb67-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(topic <span class="sc">!=</span> <span class="st">""</span>) <span class="sc">%&gt;%</span></span>
<span id="cb67-22"><a href="#cb67-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(region, topic, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb67-23"><a href="#cb67-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-24"><a href="#cb67-24" aria-hidden="true" tabindex="-1"></a><span class="co"># 4) AI legislation topics by region (exclude "Artificial Intelligence")</span></span>
<span id="cb67-25"><a href="#cb67-25" aria-hidden="true" tabindex="-1"></a>ai_topics_by_region <span class="ot">&lt;-</span> policy_data_clean <span class="sc">%&gt;%</span></span>
<span id="cb67-26"><a href="#cb67-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(region), <span class="sc">!</span><span class="fu">is.na</span>(bill_topic_tag_s_text)) <span class="sc">%&gt;%</span></span>
<span id="cb67-27"><a href="#cb67-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(region,</span>
<span id="cb67-28"><a href="#cb67-28" aria-hidden="true" tabindex="-1"></a>            <span class="at">topic =</span> bill_topic_tag_s_text) <span class="sc">%&gt;%</span></span>
<span id="cb67-29"><a href="#cb67-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_rows</span>(topic, <span class="at">sep =</span> <span class="st">"[,;]"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb67-30"><a href="#cb67-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">topic =</span> <span class="fu">str_squish</span>(<span class="fu">str_to_title</span>(topic))) <span class="sc">%&gt;%</span></span>
<span id="cb67-31"><a href="#cb67-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(topic <span class="sc">!=</span> <span class="st">""</span>, topic <span class="sc">!=</span> <span class="st">"Artificial Intelligence"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb67-32"><a href="#cb67-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(region, topic, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb67-33"><a href="#cb67-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-34"><a href="#cb67-34" aria-hidden="true" tabindex="-1"></a><span class="co"># 5) Top 5 per region (EO &amp; AI)</span></span>
<span id="cb67-35"><a href="#cb67-35" aria-hidden="true" tabindex="-1"></a>eo_top5 <span class="ot">&lt;-</span> eo_topics_by_region <span class="sc">%&gt;%</span></span>
<span id="cb67-36"><a href="#cb67-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(region) <span class="sc">%&gt;%</span></span>
<span id="cb67-37"><a href="#cb67-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">5</span>, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb67-38"><a href="#cb67-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">eo_top5 =</span> <span class="fu">paste</span>(topic, <span class="at">collapse =</span> <span class="st">", "</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb67-39"><a href="#cb67-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-40"><a href="#cb67-40" aria-hidden="true" tabindex="-1"></a>ai_top5 <span class="ot">&lt;-</span> ai_topics_by_region <span class="sc">%&gt;%</span></span>
<span id="cb67-41"><a href="#cb67-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(region) <span class="sc">%&gt;%</span></span>
<span id="cb67-42"><a href="#cb67-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">5</span>, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb67-43"><a href="#cb67-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">ai_top5 =</span> <span class="fu">paste</span>(topic, <span class="at">collapse =</span> <span class="st">", "</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb67-44"><a href="#cb67-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-45"><a href="#cb67-45" aria-hidden="true" tabindex="-1"></a>region_topics_q11 <span class="ot">&lt;-</span> eo_top5 <span class="sc">%&gt;%</span></span>
<span id="cb67-46"><a href="#cb67-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(ai_top5, <span class="at">by =</span> <span class="st">"region"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb67-47"><a href="#cb67-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(region)</span>
<span id="cb67-48"><a href="#cb67-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-49"><a href="#cb67-49" aria-hidden="true" tabindex="-1"></a><span class="co"># 6) Statements (one per region, exactly as requested)</span></span>
<span id="cb67-50"><a href="#cb67-50" aria-hidden="true" tabindex="-1"></a>insights_q11 <span class="ot">&lt;-</span> region_topics_q11 <span class="sc">%&gt;%</span></span>
<span id="cb67-51"><a href="#cb67-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">statement =</span> <span class="fu">glue</span>(</span>
<span id="cb67-52"><a href="#cb67-52" aria-hidden="true" tabindex="-1"></a>    <span class="st">"The top five most common executive order topics in the {region} are {eo_top5}, "</span>,</span>
<span id="cb67-53"><a href="#cb67-53" aria-hidden="true" tabindex="-1"></a>    <span class="st">"while {ai_top5} are the top five most common."</span></span>
<span id="cb67-54"><a href="#cb67-54" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb67-55"><a href="#cb67-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(region, statement)</span>
<span id="cb67-56"><a href="#cb67-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-57"><a href="#cb67-57" aria-hidden="true" tabindex="-1"></a><span class="co"># 7) Save tables</span></span>
<span id="cb67-58"><a href="#cb67-58" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(<span class="fu">here</span>(<span class="st">"output"</span>))) <span class="fu">dir.create</span>(<span class="fu">here</span>(<span class="st">"output"</span>), <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb67-59"><a href="#cb67-59" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(eo_topics_by_region, <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"eo_topics_by_region_q11.csv"</span>))</span>
<span id="cb67-60"><a href="#cb67-60" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(ai_topics_by_region, <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"ai_topics_by_region_q11.csv"</span>))</span>
<span id="cb67-61"><a href="#cb67-61" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(region_topics_q11,   <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"region_topics_q11.csv"</span>))</span>
<span id="cb67-62"><a href="#cb67-62" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(insights_q11,        <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"insights_q11.csv"</span>))</span>
<span id="cb67-63"><a href="#cb67-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-64"><a href="#cb67-64" aria-hidden="true" tabindex="-1"></a><span class="co"># 8) Regional word clouds (EO and AI); deterministic with set.seed</span></span>
<span id="cb67-65"><a href="#cb67-65" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb67-66"><a href="#cb67-66" aria-hidden="true" tabindex="-1"></a>unique_regions <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">unique</span>(<span class="fu">c</span>(eo_topics_by_region<span class="sc">$</span>region, ai_topics_by_region<span class="sc">$</span>region)))</span>
<span id="cb67-67"><a href="#cb67-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-68"><a href="#cb67-68" aria-hidden="true" tabindex="-1"></a><span class="fu">walk</span>(unique_regions, <span class="cf">function</span>(reg) {</span>
<span id="cb67-69"><a href="#cb67-69" aria-hidden="true" tabindex="-1"></a>  <span class="co"># EO word cloud for region (if data exists)</span></span>
<span id="cb67-70"><a href="#cb67-70" aria-hidden="true" tabindex="-1"></a>  eo_reg <span class="ot">&lt;-</span> eo_topics_by_region <span class="sc">%&gt;%</span> <span class="fu">filter</span>(region <span class="sc">==</span> reg)</span>
<span id="cb67-71"><a href="#cb67-71" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(eo_reg) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb67-72"><a href="#cb67-72" aria-hidden="true" tabindex="-1"></a>    <span class="fu">png</span>(<span class="at">filename =</span> <span class="fu">here</span>(<span class="st">"output"</span>, <span class="fu">paste0</span>(<span class="st">"wordcloud_eo_"</span>, <span class="fu">slug</span>(reg), <span class="st">"_q11.png"</span>)),</span>
<span id="cb67-73"><a href="#cb67-73" aria-hidden="true" tabindex="-1"></a>        <span class="at">width =</span> <span class="dv">1400</span>, <span class="at">height =</span> <span class="dv">1000</span>, <span class="at">res =</span> <span class="dv">150</span>, <span class="at">bg =</span> <span class="st">"white"</span>)</span>
<span id="cb67-74"><a href="#cb67-74" aria-hidden="true" tabindex="-1"></a>    <span class="fu">suppressWarnings</span>(</span>
<span id="cb67-75"><a href="#cb67-75" aria-hidden="true" tabindex="-1"></a>      <span class="fu">wordcloud</span>(<span class="at">words =</span> eo_reg<span class="sc">$</span>topic,</span>
<span id="cb67-76"><a href="#cb67-76" aria-hidden="true" tabindex="-1"></a>                <span class="at">freq  =</span> eo_reg<span class="sc">$</span>n,</span>
<span id="cb67-77"><a href="#cb67-77" aria-hidden="true" tabindex="-1"></a>                <span class="at">min.freq =</span> <span class="dv">1</span>,</span>
<span id="cb67-78"><a href="#cb67-78" aria-hidden="true" tabindex="-1"></a>                <span class="at">max.words =</span> <span class="dv">200</span>,</span>
<span id="cb67-79"><a href="#cb67-79" aria-hidden="true" tabindex="-1"></a>                <span class="at">random.order =</span> <span class="cn">FALSE</span>,</span>
<span id="cb67-80"><a href="#cb67-80" aria-hidden="true" tabindex="-1"></a>                <span class="at">rot.per =</span> <span class="fl">0.10</span>,</span>
<span id="cb67-81"><a href="#cb67-81" aria-hidden="true" tabindex="-1"></a>                <span class="at">scale =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="fl">0.8</span>),</span>
<span id="cb67-82"><a href="#cb67-82" aria-hidden="true" tabindex="-1"></a>                <span class="at">colors =</span> <span class="fu">brewer.pal</span>(<span class="dv">8</span>, <span class="st">"Dark2"</span>))</span>
<span id="cb67-83"><a href="#cb67-83" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb67-84"><a href="#cb67-84" aria-hidden="true" tabindex="-1"></a>    <span class="fu">dev.off</span>()</span>
<span id="cb67-85"><a href="#cb67-85" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb67-86"><a href="#cb67-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-87"><a href="#cb67-87" aria-hidden="true" tabindex="-1"></a>  <span class="co"># AI word cloud for region (if data exists)</span></span>
<span id="cb67-88"><a href="#cb67-88" aria-hidden="true" tabindex="-1"></a>  ai_reg <span class="ot">&lt;-</span> ai_topics_by_region <span class="sc">%&gt;%</span> <span class="fu">filter</span>(region <span class="sc">==</span> reg)</span>
<span id="cb67-89"><a href="#cb67-89" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(ai_reg) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb67-90"><a href="#cb67-90" aria-hidden="true" tabindex="-1"></a>    <span class="fu">png</span>(<span class="at">filename =</span> <span class="fu">here</span>(<span class="st">"output"</span>, <span class="fu">paste0</span>(<span class="st">"wordcloud_ai_"</span>, <span class="fu">slug</span>(reg), <span class="st">"_q11.png"</span>)),</span>
<span id="cb67-91"><a href="#cb67-91" aria-hidden="true" tabindex="-1"></a>        <span class="at">width =</span> <span class="dv">1400</span>, <span class="at">height =</span> <span class="dv">1000</span>, <span class="at">res =</span> <span class="dv">150</span>, <span class="at">bg =</span> <span class="st">"white"</span>)</span>
<span id="cb67-92"><a href="#cb67-92" aria-hidden="true" tabindex="-1"></a>    <span class="fu">suppressWarnings</span>(</span>
<span id="cb67-93"><a href="#cb67-93" aria-hidden="true" tabindex="-1"></a>      <span class="fu">wordcloud</span>(<span class="at">words =</span> ai_reg<span class="sc">$</span>topic,</span>
<span id="cb67-94"><a href="#cb67-94" aria-hidden="true" tabindex="-1"></a>                <span class="at">freq  =</span> ai_reg<span class="sc">$</span>n,</span>
<span id="cb67-95"><a href="#cb67-95" aria-hidden="true" tabindex="-1"></a>                <span class="at">min.freq =</span> <span class="dv">1</span>,</span>
<span id="cb67-96"><a href="#cb67-96" aria-hidden="true" tabindex="-1"></a>                <span class="at">max.words =</span> <span class="dv">200</span>,</span>
<span id="cb67-97"><a href="#cb67-97" aria-hidden="true" tabindex="-1"></a>                <span class="at">random.order =</span> <span class="cn">FALSE</span>,</span>
<span id="cb67-98"><a href="#cb67-98" aria-hidden="true" tabindex="-1"></a>                <span class="at">rot.per =</span> <span class="fl">0.10</span>,</span>
<span id="cb67-99"><a href="#cb67-99" aria-hidden="true" tabindex="-1"></a>                <span class="at">scale =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="fl">0.8</span>),</span>
<span id="cb67-100"><a href="#cb67-100" aria-hidden="true" tabindex="-1"></a>                <span class="at">colors =</span> <span class="fu">brewer.pal</span>(<span class="dv">8</span>, <span class="st">"Dark2"</span>))</span>
<span id="cb67-101"><a href="#cb67-101" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb67-102"><a href="#cb67-102" aria-hidden="true" tabindex="-1"></a>    <span class="fu">dev.off</span>()</span>
<span id="cb67-103"><a href="#cb67-103" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb67-104"><a href="#cb67-104" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb67-105"><a href="#cb67-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-106"><a href="#cb67-106" aria-hidden="true" tabindex="-1"></a><span class="co"># 9) Print in document</span></span>
<span id="cb67-107"><a href="#cb67-107" aria-hidden="true" tabindex="-1"></a>region_topics_q11</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  region      eo_top5                                                    ai_top5
  &lt;chr&gt;       &lt;chr&gt;                                                      &lt;chr&gt;  
1 Midwest     Website/Portal, Information Technology, Broadband, Cybers… Public…
2 Northeast   Administrative Reorganization, Information Technology, Cy… Civil …
3 South       Cybersecurity, Information Technology, Broadband, Adminis… Educat…
4 Territories Administrative Reorganization, Broadband, Information Tec… Crimin…
5 West        Broadband, Interoperability, Cybersecurity, Information T… Crimin…</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>insights_q11</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  region      statement                                                         
  &lt;chr&gt;       &lt;glue&gt;                                                            
1 Midwest     The top five most common executive order topics in the Midwest ar…
2 Northeast   The top five most common executive order topics in the Northeast …
3 South       The top five most common executive order topics in the South are …
4 Territories The top five most common executive order topics in the Territorie…
5 West        The top five most common executive order topics in the West are B…</code></pre>
</div>
</div></div>
</section>
<section id="q12" class="level3">
<h3 class="anchored" data-anchor-id="q12">Q12</h3>
<ul>
<li><p>How do states that first adopted <strong>(early adopters)</strong> digital government executive order policies between <strong>2013–2015</strong> differ from those <strong>(late adopters)</strong> that first adopted them between <strong>2023–2025</strong> in terms of:</p>
<ul>
<li><p>Policy topics (executive order topic tags)</p></li>
<li><p>Regional distribution (region 1–5 categories)</p></li>
</ul></li>
</ul>
<p>I compared early adopters of digital government executive orders (2013–2015) to late adopters (2023–2025). First, I grouped states into early or late cohorts using the <code>executive_order_year_enacted</code> field. Multi-topic strings in <code>executive_order_last_topic_tag_s</code> were split on commas/semicolons, trimmed, and standardized to title case. I summarized the top five topics for each group and visualized them with word clouds. Regional distributions were assessed by counting the number of executive orders per region for early vs.&nbsp;late adopters. Given the limited sample sizes and topic sparsity, I focused on descriptive comparisons only rather than formal statistical testing.</p>
<div class="cell-container code-fold"><div class="cell-decorator"><pre>In [16]:</pre></div><div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr); <span class="fu">library</span>(here)</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr); <span class="fu">library</span>(tidyr); <span class="fu">library</span>(stringr); <span class="fu">library</span>(glue)</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wordcloud); <span class="fu">library</span>(RColorBrewer)</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 1) Load data</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>policy_data_clean <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"policy_data_clean.rds"</span>))</span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) Subset executive orders with years</span></span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>eo <span class="ot">&lt;-</span> policy_data_clean <span class="sc">%&gt;%</span></span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(executive_order_year_enacted),</span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a>         <span class="sc">!</span><span class="fu">is.na</span>(executive_order_last_topic_tag_s),</span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a>         executive_order_year_enacted <span class="sc">&gt;=</span> <span class="dv">2013</span>,</span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a>         executive_order_year_enacted <span class="sc">&lt;=</span> <span class="dv">2025</span>) <span class="sc">%&gt;%</span></span>
<span id="cb71-14"><a href="#cb71-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(state_territory, region, executive_order_year_enacted,</span>
<span id="cb71-15"><a href="#cb71-15" aria-hidden="true" tabindex="-1"></a>         executive_order_last_topic_tag_s)</span>
<span id="cb71-16"><a href="#cb71-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-17"><a href="#cb71-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 3) Group into early vs late adopters</span></span>
<span id="cb71-18"><a href="#cb71-18" aria-hidden="true" tabindex="-1"></a>eo <span class="ot">&lt;-</span> eo <span class="sc">%&gt;%</span></span>
<span id="cb71-19"><a href="#cb71-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">period =</span> <span class="fu">case_when</span>(</span>
<span id="cb71-20"><a href="#cb71-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(executive_order_year_enacted, <span class="dv">2013</span>, <span class="dv">2015</span>) <span class="sc">~</span> <span class="st">"Early (2013–2015)"</span>,</span>
<span id="cb71-21"><a href="#cb71-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(executive_order_year_enacted, <span class="dv">2023</span>, <span class="dv">2025</span>) <span class="sc">~</span> <span class="st">"Late (2023–2025)"</span>,</span>
<span id="cb71-22"><a href="#cb71-22" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb71-23"><a href="#cb71-23" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb71-24"><a href="#cb71-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(period))</span>
<span id="cb71-25"><a href="#cb71-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-26"><a href="#cb71-26" aria-hidden="true" tabindex="-1"></a><span class="co"># 4) Split topics</span></span>
<span id="cb71-27"><a href="#cb71-27" aria-hidden="true" tabindex="-1"></a>eo_topics <span class="ot">&lt;-</span> eo <span class="sc">%&gt;%</span></span>
<span id="cb71-28"><a href="#cb71-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_rows</span>(executive_order_last_topic_tag_s, <span class="at">sep =</span> <span class="st">"[,;]"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb71-29"><a href="#cb71-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">topic =</span> <span class="fu">str_squish</span>(<span class="fu">str_to_title</span>(executive_order_last_topic_tag_s))) <span class="sc">%&gt;%</span></span>
<span id="cb71-30"><a href="#cb71-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(topic <span class="sc">!=</span> <span class="st">""</span>)</span>
<span id="cb71-31"><a href="#cb71-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-32"><a href="#cb71-32" aria-hidden="true" tabindex="-1"></a><span class="co"># 5) Frequency tables</span></span>
<span id="cb71-33"><a href="#cb71-33" aria-hidden="true" tabindex="-1"></a>topic_counts <span class="ot">&lt;-</span> eo_topics <span class="sc">%&gt;%</span></span>
<span id="cb71-34"><a href="#cb71-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(period, topic, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb71-35"><a href="#cb71-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-36"><a href="#cb71-36" aria-hidden="true" tabindex="-1"></a>top5_early <span class="ot">&lt;-</span> topic_counts <span class="sc">%&gt;%</span></span>
<span id="cb71-37"><a href="#cb71-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(period <span class="sc">==</span> <span class="st">"Early (2013–2015)"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb71-38"><a href="#cb71-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">5</span>, <span class="at">with_ties =</span> <span class="cn">FALSE</span>)</span>
<span id="cb71-39"><a href="#cb71-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-40"><a href="#cb71-40" aria-hidden="true" tabindex="-1"></a>top5_late <span class="ot">&lt;-</span> topic_counts <span class="sc">%&gt;%</span></span>
<span id="cb71-41"><a href="#cb71-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(period <span class="sc">==</span> <span class="st">"Late (2023–2025)"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb71-42"><a href="#cb71-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">5</span>, <span class="at">with_ties =</span> <span class="cn">FALSE</span>)</span>
<span id="cb71-43"><a href="#cb71-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-44"><a href="#cb71-44" aria-hidden="true" tabindex="-1"></a><span class="co"># 6) Regional distribution (counts per region)</span></span>
<span id="cb71-45"><a href="#cb71-45" aria-hidden="true" tabindex="-1"></a>region_counts_q12 <span class="ot">&lt;-</span> eo <span class="sc">%&gt;%</span></span>
<span id="cb71-46"><a href="#cb71-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(period, region, <span class="at">name =</span> <span class="st">"count"</span>)</span>
<span id="cb71-47"><a href="#cb71-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-48"><a href="#cb71-48" aria-hidden="true" tabindex="-1"></a><span class="co"># 7) Statements (purely descriptive)</span></span>
<span id="cb71-49"><a href="#cb71-49" aria-hidden="true" tabindex="-1"></a>insights_q12 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb71-50"><a href="#cb71-50" aria-hidden="true" tabindex="-1"></a>  <span class="at">statement =</span> <span class="fu">c</span>(</span>
<span id="cb71-51"><a href="#cb71-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glue</span>(<span class="st">"The top five most common executive order topics among early adopters (2013–2015) were {paste(top5_early$topic, collapse = ', ')}, while late adopters (2023–2025) focused more on {paste(top5_late$topic, collapse = ', ')}."</span>),</span>
<span id="cb71-52"><a href="#cb71-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glue</span>(<span class="st">"Regionally, early adopters were concentrated in: {paste(unique(region_counts_q12$region[region_counts_q12$period == 'Early (2013–2015)']), collapse = ', ')}; late adopters in: {paste(unique(region_counts_q12$region[region_counts_q12$period == 'Late (2023–2025)']), collapse = ', ')}."</span>)</span>
<span id="cb71-53"><a href="#cb71-53" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb71-54"><a href="#cb71-54" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb71-55"><a href="#cb71-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-56"><a href="#cb71-56" aria-hidden="true" tabindex="-1"></a><span class="co"># 8) Save outputs</span></span>
<span id="cb71-57"><a href="#cb71-57" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(<span class="fu">here</span>(<span class="st">"output"</span>))) <span class="fu">dir.create</span>(<span class="fu">here</span>(<span class="st">"output"</span>), <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb71-58"><a href="#cb71-58" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(topic_counts,      <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"eo_topic_counts_q12.csv"</span>))</span>
<span id="cb71-59"><a href="#cb71-59" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(region_counts_q12, <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"region_counts_q12.csv"</span>))</span>
<span id="cb71-60"><a href="#cb71-60" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(insights_q12,      <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"insights_q12.csv"</span>))</span>
<span id="cb71-61"><a href="#cb71-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-62"><a href="#cb71-62" aria-hidden="true" tabindex="-1"></a><span class="co"># 9) Word clouds (early vs late)</span></span>
<span id="cb71-63"><a href="#cb71-63" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb71-64"><a href="#cb71-64" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (grp <span class="cf">in</span> <span class="fu">unique</span>(eo_topics<span class="sc">$</span>period)) {</span>
<span id="cb71-65"><a href="#cb71-65" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> eo_topics <span class="sc">%&gt;%</span> <span class="fu">filter</span>(period <span class="sc">==</span> grp) <span class="sc">%&gt;%</span> <span class="fu">count</span>(topic)</span>
<span id="cb71-66"><a href="#cb71-66" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(dat) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb71-67"><a href="#cb71-67" aria-hidden="true" tabindex="-1"></a>    <span class="fu">png</span>(<span class="at">filename =</span> <span class="fu">here</span>(<span class="st">"output"</span>, <span class="fu">paste0</span>(<span class="st">"wordcloud_"</span>, <span class="fu">str_replace_all</span>(grp, <span class="st">"[^A-Za-z0-9]"</span>, <span class="st">"_"</span>), <span class="st">"_q12.png"</span>)),</span>
<span id="cb71-68"><a href="#cb71-68" aria-hidden="true" tabindex="-1"></a>        <span class="at">width =</span> <span class="dv">1400</span>, <span class="at">height =</span> <span class="dv">1000</span>, <span class="at">res =</span> <span class="dv">150</span>, <span class="at">bg =</span> <span class="st">"white"</span>)</span>
<span id="cb71-69"><a href="#cb71-69" aria-hidden="true" tabindex="-1"></a>    <span class="fu">wordcloud</span>(<span class="at">words =</span> dat<span class="sc">$</span>topic,</span>
<span id="cb71-70"><a href="#cb71-70" aria-hidden="true" tabindex="-1"></a>              <span class="at">freq =</span> dat<span class="sc">$</span>n,</span>
<span id="cb71-71"><a href="#cb71-71" aria-hidden="true" tabindex="-1"></a>              <span class="at">min.freq =</span> <span class="dv">1</span>,</span>
<span id="cb71-72"><a href="#cb71-72" aria-hidden="true" tabindex="-1"></a>              <span class="at">max.words =</span> <span class="dv">200</span>,</span>
<span id="cb71-73"><a href="#cb71-73" aria-hidden="true" tabindex="-1"></a>              <span class="at">random.order =</span> <span class="cn">FALSE</span>,</span>
<span id="cb71-74"><a href="#cb71-74" aria-hidden="true" tabindex="-1"></a>              <span class="at">rot.per =</span> <span class="fl">0.10</span>,</span>
<span id="cb71-75"><a href="#cb71-75" aria-hidden="true" tabindex="-1"></a>              <span class="at">scale =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="fl">0.8</span>),</span>
<span id="cb71-76"><a href="#cb71-76" aria-hidden="true" tabindex="-1"></a>              <span class="at">colors =</span> <span class="fu">brewer.pal</span>(<span class="dv">8</span>, <span class="st">"Dark2"</span>))</span>
<span id="cb71-77"><a href="#cb71-77" aria-hidden="true" tabindex="-1"></a>    <span class="fu">dev.off</span>()</span>
<span id="cb71-78"><a href="#cb71-78" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb71-79"><a href="#cb71-79" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in wordcloud(words = dat$topic, freq = dat$n, min.freq = 1, max.words =
200, : Information Technology could not be fit on page. It will not be plotted.</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 10) Print</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>top5_early</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  period            topic                      n
  &lt;chr&gt;             &lt;chr&gt;                  &lt;int&gt;
1 Early (2013–2015) Cybersecurity             18
2 Early (2013–2015) Information Technology    18
3 Early (2013–2015) Interoperability          17
4 Early (2013–2015) Website/Portal            11
5 Early (2013–2015) Broadband                  9</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>top5_late</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  period           topic                             n
  &lt;chr&gt;            &lt;chr&gt;                         &lt;int&gt;
1 Late (2023–2025) Artificial Intelligence          10
2 Late (2023–2025) Administrative Reorganization     4
3 Late (2023–2025) Broadband                         4
4 Late (2023–2025) Digital Service Team              4
5 Late (2023–2025) Case/Application Processing       2</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>region_counts_q12</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>              period      region count
1  Early (2013–2015)     Midwest    10
2  Early (2013–2015)   Northeast    24
3  Early (2013–2015)       South    26
4  Early (2013–2015) Territories     4
5  Early (2013–2015)        West    18
6   Late (2023–2025)     Midwest     2
7   Late (2023–2025)   Northeast    10
8   Late (2023–2025)       South     6
9   Late (2023–2025) Territories     4
10  Late (2023–2025)        West     6</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>insights_q12</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 1
  statement                                                                     
  &lt;chr&gt;                                                                         
1 The top five most common executive order topics among early adopters (2013–20…
2 Regionally, early adopters were concentrated in: Midwest, Northeast, South, T…</code></pre>
</div>
</div></div>
</section>
<section id="q13" class="level3">
<h3 class="anchored" data-anchor-id="q13">Q13</h3>
<ul>
<li><p>How do states that first adopted <strong>(early adopters)</strong> AI legislation between <strong>2019–2021</strong> differ from those <strong>(late adopters)</strong> that first adopted it between <strong>2023–2025</strong> in terms of:</p>
<ul>
<li><p>Policy topics (bill topic tags, excluding the baseline “artificial intelligence” tag)</p></li>
<li><p>Regional distribution (region 1–5 categories)</p></li>
</ul></li>
</ul>
<p>I compared early adopters of AI legislation (2019–2021) to late adopters (2023–2025). I grouped states by adoption period using the <code>legislative_session</code> field. Policy topics (<code>bill_topic_tag_s_text</code>) were split on commas/semicolons, cleaned, and standardized to title case. Because all bills in this dataset are inherently AI-related, I excluded the generic tag <em>“Artificial Intelligence”</em> to avoid inflating its frequency and to highlight the other substantive policy areas addressed in AI legislation (e.g., data governance, privacy, workforce). I then summarized the top five topics for each group, created word clouds for visualization, and compared regional distributions by counting the number of adopting states in each CDC region.</p>
<div class="cell-container code-fold"><div class="cell-decorator"><pre>In [17]:</pre></div><div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr); <span class="fu">library</span>(here)</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr); <span class="fu">library</span>(tidyr); <span class="fu">library</span>(stringr); <span class="fu">library</span>(glue)</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wordcloud); <span class="fu">library</span>(RColorBrewer)</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 1) Load data</span></span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>policy_data_clean <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"policy_data_clean.rds"</span>))</span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) Subset AI legislations with years</span></span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a>ai <span class="ot">&lt;-</span> policy_data_clean <span class="sc">%&gt;%</span></span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(legislative_session),</span>
<span id="cb81-11"><a href="#cb81-11" aria-hidden="true" tabindex="-1"></a>         <span class="sc">!</span><span class="fu">is.na</span>(bill_topic_tag_s_text),</span>
<span id="cb81-12"><a href="#cb81-12" aria-hidden="true" tabindex="-1"></a>         legislative_session <span class="sc">&gt;=</span> <span class="dv">2019</span>,</span>
<span id="cb81-13"><a href="#cb81-13" aria-hidden="true" tabindex="-1"></a>         legislative_session <span class="sc">&lt;=</span> <span class="dv">2025</span>) <span class="sc">%&gt;%</span></span>
<span id="cb81-14"><a href="#cb81-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(state_territory, region, legislative_session,</span>
<span id="cb81-15"><a href="#cb81-15" aria-hidden="true" tabindex="-1"></a>         bill_topic_tag_s_text)</span>
<span id="cb81-16"><a href="#cb81-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-17"><a href="#cb81-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 3) Group into early vs late adopters</span></span>
<span id="cb81-18"><a href="#cb81-18" aria-hidden="true" tabindex="-1"></a>ai <span class="ot">&lt;-</span> ai <span class="sc">%&gt;%</span></span>
<span id="cb81-19"><a href="#cb81-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">period =</span> <span class="fu">case_when</span>(</span>
<span id="cb81-20"><a href="#cb81-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(legislative_session, <span class="dv">2019</span>, <span class="dv">2021</span>) <span class="sc">~</span> <span class="st">"Early (2019–2021)"</span>,</span>
<span id="cb81-21"><a href="#cb81-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(legislative_session, <span class="dv">2023</span>, <span class="dv">2025</span>) <span class="sc">~</span> <span class="st">"Late (2023–2025)"</span>,</span>
<span id="cb81-22"><a href="#cb81-22" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb81-23"><a href="#cb81-23" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb81-24"><a href="#cb81-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(period))</span>
<span id="cb81-25"><a href="#cb81-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-26"><a href="#cb81-26" aria-hidden="true" tabindex="-1"></a><span class="co"># 4) Split topics, clean, and exclude "Artificial Intelligence"</span></span>
<span id="cb81-27"><a href="#cb81-27" aria-hidden="true" tabindex="-1"></a>ai_topics <span class="ot">&lt;-</span> ai <span class="sc">%&gt;%</span></span>
<span id="cb81-28"><a href="#cb81-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_rows</span>(bill_topic_tag_s_text, <span class="at">sep =</span> <span class="st">"[,;]"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb81-29"><a href="#cb81-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">topic =</span> <span class="fu">str_squish</span>(<span class="fu">str_to_title</span>(bill_topic_tag_s_text))) <span class="sc">%&gt;%</span></span>
<span id="cb81-30"><a href="#cb81-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(topic <span class="sc">!=</span> <span class="st">""</span>, topic <span class="sc">!=</span> <span class="st">"Artificial Intelligence"</span>)</span>
<span id="cb81-31"><a href="#cb81-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-32"><a href="#cb81-32" aria-hidden="true" tabindex="-1"></a><span class="co"># 5) Frequency tables</span></span>
<span id="cb81-33"><a href="#cb81-33" aria-hidden="true" tabindex="-1"></a>topic_counts <span class="ot">&lt;-</span> ai_topics <span class="sc">%&gt;%</span></span>
<span id="cb81-34"><a href="#cb81-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(period, topic, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb81-35"><a href="#cb81-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-36"><a href="#cb81-36" aria-hidden="true" tabindex="-1"></a>top5_early <span class="ot">&lt;-</span> topic_counts <span class="sc">%&gt;%</span></span>
<span id="cb81-37"><a href="#cb81-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(period <span class="sc">==</span> <span class="st">"Early (2019–2021)"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb81-38"><a href="#cb81-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">5</span>, <span class="at">with_ties =</span> <span class="cn">FALSE</span>)</span>
<span id="cb81-39"><a href="#cb81-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-40"><a href="#cb81-40" aria-hidden="true" tabindex="-1"></a>top5_late <span class="ot">&lt;-</span> topic_counts <span class="sc">%&gt;%</span></span>
<span id="cb81-41"><a href="#cb81-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(period <span class="sc">==</span> <span class="st">"Late (2023–2025)"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb81-42"><a href="#cb81-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">5</span>, <span class="at">with_ties =</span> <span class="cn">FALSE</span>)</span>
<span id="cb81-43"><a href="#cb81-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-44"><a href="#cb81-44" aria-hidden="true" tabindex="-1"></a><span class="co"># 6) Regional distribution (counts per region)</span></span>
<span id="cb81-45"><a href="#cb81-45" aria-hidden="true" tabindex="-1"></a>region_counts_q13 <span class="ot">&lt;-</span> ai <span class="sc">%&gt;%</span></span>
<span id="cb81-46"><a href="#cb81-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(period, region, <span class="at">name =</span> <span class="st">"count"</span>)</span>
<span id="cb81-47"><a href="#cb81-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-48"><a href="#cb81-48" aria-hidden="true" tabindex="-1"></a><span class="co"># 7) Statements</span></span>
<span id="cb81-49"><a href="#cb81-49" aria-hidden="true" tabindex="-1"></a>insights_q13 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb81-50"><a href="#cb81-50" aria-hidden="true" tabindex="-1"></a>  <span class="at">statement =</span> <span class="fu">c</span>(</span>
<span id="cb81-51"><a href="#cb81-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glue</span>(<span class="st">"Early adopters of AI legislation (2019–2021) were concentrated in regions {paste(unique(region_counts_q13$region[region_counts_q13$period == 'Early (2019–2021)']), collapse = ', ')}, while late adopters (2023–2025) were more evenly spread across regions {paste(unique(region_counts_q13$region[region_counts_q13$period == 'Late (2023–2025)']), collapse = ', ')}."</span>),</span>
<span id="cb81-52"><a href="#cb81-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glue</span>(<span class="st">"The top AI legislation topics for early adopters were {paste(top5_early$topic, collapse = ', ')}, while late adopters more commonly emphasized {paste(top5_late$topic, collapse = ', ')}."</span>)</span>
<span id="cb81-53"><a href="#cb81-53" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb81-54"><a href="#cb81-54" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb81-55"><a href="#cb81-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-56"><a href="#cb81-56" aria-hidden="true" tabindex="-1"></a><span class="co"># 8) Save outputs</span></span>
<span id="cb81-57"><a href="#cb81-57" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(<span class="fu">here</span>(<span class="st">"output"</span>))) <span class="fu">dir.create</span>(<span class="fu">here</span>(<span class="st">"output"</span>), <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb81-58"><a href="#cb81-58" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(topic_counts,      <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"ai_topic_counts_q13.csv"</span>))</span>
<span id="cb81-59"><a href="#cb81-59" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(region_counts_q13, <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"region_counts_q13.csv"</span>))</span>
<span id="cb81-60"><a href="#cb81-60" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(insights_q13,      <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"insights_q13.csv"</span>))</span>
<span id="cb81-61"><a href="#cb81-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-62"><a href="#cb81-62" aria-hidden="true" tabindex="-1"></a><span class="co"># 9) Word clouds (early vs late)</span></span>
<span id="cb81-63"><a href="#cb81-63" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb81-64"><a href="#cb81-64" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (grp <span class="cf">in</span> <span class="fu">unique</span>(ai_topics<span class="sc">$</span>period)) {</span>
<span id="cb81-65"><a href="#cb81-65" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> ai_topics <span class="sc">%&gt;%</span> <span class="fu">filter</span>(period <span class="sc">==</span> grp) <span class="sc">%&gt;%</span> <span class="fu">count</span>(topic)</span>
<span id="cb81-66"><a href="#cb81-66" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(dat) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb81-67"><a href="#cb81-67" aria-hidden="true" tabindex="-1"></a>    <span class="fu">png</span>(<span class="at">filename =</span> <span class="fu">here</span>(<span class="st">"output"</span>, <span class="fu">paste0</span>(<span class="st">"wordcloud_"</span>, <span class="fu">str_replace_all</span>(grp, <span class="st">"[^A-Za-z0-9]"</span>, <span class="st">"_"</span>), <span class="st">"_q13.png"</span>)),</span>
<span id="cb81-68"><a href="#cb81-68" aria-hidden="true" tabindex="-1"></a>        <span class="at">width =</span> <span class="dv">1400</span>, <span class="at">height =</span> <span class="dv">1000</span>, <span class="at">res =</span> <span class="dv">150</span>, <span class="at">bg =</span> <span class="st">"white"</span>)</span>
<span id="cb81-69"><a href="#cb81-69" aria-hidden="true" tabindex="-1"></a>    <span class="fu">wordcloud</span>(<span class="at">words =</span> dat<span class="sc">$</span>topic,</span>
<span id="cb81-70"><a href="#cb81-70" aria-hidden="true" tabindex="-1"></a>              <span class="at">freq =</span> dat<span class="sc">$</span>n,</span>
<span id="cb81-71"><a href="#cb81-71" aria-hidden="true" tabindex="-1"></a>              <span class="at">min.freq =</span> <span class="dv">1</span>,</span>
<span id="cb81-72"><a href="#cb81-72" aria-hidden="true" tabindex="-1"></a>              <span class="at">max.words =</span> <span class="dv">200</span>,</span>
<span id="cb81-73"><a href="#cb81-73" aria-hidden="true" tabindex="-1"></a>              <span class="at">random.order =</span> <span class="cn">FALSE</span>,</span>
<span id="cb81-74"><a href="#cb81-74" aria-hidden="true" tabindex="-1"></a>              <span class="at">rot.per =</span> <span class="fl">0.10</span>,</span>
<span id="cb81-75"><a href="#cb81-75" aria-hidden="true" tabindex="-1"></a>              <span class="at">scale =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="fl">0.8</span>),</span>
<span id="cb81-76"><a href="#cb81-76" aria-hidden="true" tabindex="-1"></a>              <span class="at">colors =</span> <span class="fu">brewer.pal</span>(<span class="dv">8</span>, <span class="st">"Dark2"</span>))</span>
<span id="cb81-77"><a href="#cb81-77" aria-hidden="true" tabindex="-1"></a>    <span class="fu">dev.off</span>()</span>
<span id="cb81-78"><a href="#cb81-78" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb81-79"><a href="#cb81-79" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb81-80"><a href="#cb81-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-81"><a href="#cb81-81" aria-hidden="true" tabindex="-1"></a><span class="co"># 10) Print</span></span>
<span id="cb81-82"><a href="#cb81-82" aria-hidden="true" tabindex="-1"></a>top5_early</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  period            topic                     n
  &lt;chr&gt;             &lt;chr&gt;                 &lt;int&gt;
1 Early (2019–2021) Public Safety             4
2 Early (2019–2021) Criminal/Legal System     3
3 Early (2019–2021) Public Health             3
4 Early (2019–2021) Blockchain                1
5 Early (2019–2021) Civil Rights              1</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>top5_late</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  period           topic                     n
  &lt;chr&gt;            &lt;chr&gt;                 &lt;int&gt;
1 Late (2023–2025) Education                10
2 Late (2023–2025) Criminal/Legal System     8
3 Late (2023–2025) Civil Rights              6
4 Late (2023–2025) Public Health             5
5 Late (2023–2025) Public Safety             4</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>region_counts_q13</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>             period      region count
1 Early (2019–2021)     Midwest     2
2 Early (2019–2021)   Northeast     2
3 Early (2019–2021)       South     5
4 Early (2019–2021)        West     4
5  Late (2023–2025)     Midwest     6
6  Late (2023–2025)   Northeast     7
7  Late (2023–2025)       South    20
8  Late (2023–2025) Territories     1
9  Late (2023–2025)        West     9</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>insights_q13</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 1
  statement                                                                     
  &lt;chr&gt;                                                                         
1 Early adopters of AI legislation (2019–2021) were concentrated in regions Mid…
2 The top AI legislation topics for early adopters were Public Safety, Criminal…</code></pre>
</div>
</div></div>
</section>
</section>
<section id="export-all-insights" class="level2">
<h2 class="anchored" data-anchor-id="export-all-insights">Export all insights</h2>
<p>I’m almost done! I now merge all insights/statements into one document to use for our reporting.</p>
<div class="cell-container code-fold"><div class="cell-decorator"><pre>In [18]:</pre></div><div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fs)</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 1) Files to include (ordered) — keep Q4 split files; exclude insights_q4.csv</span></span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>insight_files <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights.csv"</span>,                <span class="co"># Q1</span></span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights_q2.csv"</span>,</span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights_q3.csv"</span>,</span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights_cdo_q4.csv"</span>,         <span class="co"># Q4 (part 1)</span></span>
<span id="cb89-11"><a href="#cb89-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights_dst_q4.csv"</span>,         <span class="co"># Q4 (part 2)</span></span>
<span id="cb89-12"><a href="#cb89-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights_q5.csv"</span>,</span>
<span id="cb89-13"><a href="#cb89-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights_q6.csv"</span>,</span>
<span id="cb89-14"><a href="#cb89-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights_q7.csv"</span>,</span>
<span id="cb89-15"><a href="#cb89-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights_q8.csv"</span>,</span>
<span id="cb89-16"><a href="#cb89-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights_q9.csv"</span>,</span>
<span id="cb89-17"><a href="#cb89-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights_q10.csv"</span>,</span>
<span id="cb89-18"><a href="#cb89-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights_q11.csv"</span>,</span>
<span id="cb89-19"><a href="#cb89-19" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights_q12.csv"</span>,</span>
<span id="cb89-20"><a href="#cb89-20" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights_q13.csv"</span></span>
<span id="cb89-21"><a href="#cb89-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb89-22"><a href="#cb89-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-23"><a href="#cb89-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) Map filenames -&gt; question numbers</span></span>
<span id="cb89-24"><a href="#cb89-24" aria-hidden="true" tabindex="-1"></a>q_map <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb89-25"><a href="#cb89-25" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights.csv"</span>       <span class="ot">=</span> <span class="st">"Q1"</span>,</span>
<span id="cb89-26"><a href="#cb89-26" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights_q2.csv"</span>    <span class="ot">=</span> <span class="st">"Q2"</span>,</span>
<span id="cb89-27"><a href="#cb89-27" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights_q3.csv"</span>    <span class="ot">=</span> <span class="st">"Q3"</span>,</span>
<span id="cb89-28"><a href="#cb89-28" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights_cdo_q4.csv"</span><span class="ot">=</span> <span class="st">"Q4"</span>,</span>
<span id="cb89-29"><a href="#cb89-29" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights_dst_q4.csv"</span><span class="ot">=</span> <span class="st">"Q4"</span>,</span>
<span id="cb89-30"><a href="#cb89-30" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights_q5.csv"</span>    <span class="ot">=</span> <span class="st">"Q5"</span>,</span>
<span id="cb89-31"><a href="#cb89-31" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights_q6.csv"</span>    <span class="ot">=</span> <span class="st">"Q6"</span>,</span>
<span id="cb89-32"><a href="#cb89-32" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights_q7.csv"</span>    <span class="ot">=</span> <span class="st">"Q7"</span>,</span>
<span id="cb89-33"><a href="#cb89-33" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights_q8.csv"</span>    <span class="ot">=</span> <span class="st">"Q8"</span>,</span>
<span id="cb89-34"><a href="#cb89-34" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights_q9.csv"</span>    <span class="ot">=</span> <span class="st">"Q9"</span>,</span>
<span id="cb89-35"><a href="#cb89-35" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights_q10.csv"</span>   <span class="ot">=</span> <span class="st">"Q10"</span>,</span>
<span id="cb89-36"><a href="#cb89-36" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights_q11.csv"</span>   <span class="ot">=</span> <span class="st">"Q11"</span>,</span>
<span id="cb89-37"><a href="#cb89-37" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights_q12.csv"</span>   <span class="ot">=</span> <span class="st">"Q12"</span>,</span>
<span id="cb89-38"><a href="#cb89-38" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insights_q13.csv"</span>   <span class="ot">=</span> <span class="st">"Q13"</span></span>
<span id="cb89-39"><a href="#cb89-39" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb89-40"><a href="#cb89-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-41"><a href="#cb89-41" aria-hidden="true" tabindex="-1"></a><span class="co"># 3) Map question numbers -&gt; full research question text</span></span>
<span id="cb89-42"><a href="#cb89-42" aria-hidden="true" tabindex="-1"></a>q_text_map <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb89-43"><a href="#cb89-43" aria-hidden="true" tabindex="-1"></a>  <span class="at">Q1  =</span> <span class="st">"How many states/territories have at least one: Executive order, AI Legislation, Chief Data Officer (CDO), Digital Service Team (DST), Digital Service Impact Report, Design system"</span>,</span>
<span id="cb89-44"><a href="#cb89-44" aria-hidden="true" tabindex="-1"></a>  <span class="at">Q2  =</span> <span class="st">"Which regions have the most vs least: Executive order, AI Legislations, Chief Data Officers (CDO), Digital Service Teams (DST), Digital Service Impact Reports, Design systems"</span>,</span>
<span id="cb89-45"><a href="#cb89-45" aria-hidden="true" tabindex="-1"></a>  <span class="at">Q3  =</span> <span class="st">"Which states are the most active vs. least active across all categories?"</span>,</span>
<span id="cb89-46"><a href="#cb89-46" aria-hidden="true" tabindex="-1"></a>  <span class="at">Q4  =</span> <span class="st">"Which states introduced CDOs or DSTs earliest, and how has that spread across regions?"</span>,</span>
<span id="cb89-47"><a href="#cb89-47" aria-hidden="true" tabindex="-1"></a>  <span class="at">Q5  =</span> <span class="st">"Which states with active CDOs also have design systems or DSTs?"</span>,</span>
<span id="cb89-48"><a href="#cb89-48" aria-hidden="true" tabindex="-1"></a>  <span class="at">Q6  =</span> <span class="st">"Are states with AI legislation more likely to have other forms of digital infrastructure (DST, design systems)?"</span>,</span>
<span id="cb89-49"><a href="#cb89-49" aria-hidden="true" tabindex="-1"></a>  <span class="at">Q7  =</span> <span class="st">"In which region(s) do AI legislation policies cluster in?"</span>,</span>
<span id="cb89-50"><a href="#cb89-50" aria-hidden="true" tabindex="-1"></a>  <span class="at">Q8  =</span> <span class="st">"What are the most common policy topics in executive orders (e.g., broadband, interoperability, AI)?"</span>,</span>
<span id="cb89-51"><a href="#cb89-51" aria-hidden="true" tabindex="-1"></a>  <span class="at">Q9  =</span> <span class="st">"What are the most common policy topics in AI legislations orders (e.g., broadband, interoperability, AI)?"</span>,</span>
<span id="cb89-52"><a href="#cb89-52" aria-hidden="true" tabindex="-1"></a>  <span class="at">Q10 =</span> <span class="st">"What is the trend over time in the number of executive orders and AI legislations enacted?"</span>,</span>
<span id="cb89-53"><a href="#cb89-53" aria-hidden="true" tabindex="-1"></a>  <span class="at">Q11 =</span> <span class="st">"Do certain AI legislation topics cluster in certain regions? Do certain executive topics topics cluster in certain regions?"</span>,</span>
<span id="cb89-54"><a href="#cb89-54" aria-hidden="true" tabindex="-1"></a>  <span class="at">Q12 =</span> <span class="st">"How do states that first adopted (early adopters) digital government executive order policies between 2013–2015 differ from those (late adopters) that first adopted them between 2023–2025 in terms of: Policy topics (executive order topic tags) and Regional distribution (region 1–5 categories)"</span>,</span>
<span id="cb89-55"><a href="#cb89-55" aria-hidden="true" tabindex="-1"></a>  <span class="at">Q13 =</span> <span class="st">"How do states that first adopted (early adopters) AI legislation between 2019–2021 differ from those (late adopters) that first adopted it between 2023–2025 in terms of: Policy topics (bill topic tags, excluding the baseline 'artificial intelligence' tag) and Regional distribution (region 1–5 categories)"</span></span>
<span id="cb89-56"><a href="#cb89-56" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb89-57"><a href="#cb89-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-58"><a href="#cb89-58" aria-hidden="true" tabindex="-1"></a><span class="co"># 4) Keep only files that actually exist in output/</span></span>
<span id="cb89-59"><a href="#cb89-59" aria-hidden="true" tabindex="-1"></a>insight_files <span class="ot">&lt;-</span> <span class="fu">keep</span>(insight_files, <span class="sc">~</span> <span class="fu">file_exists</span>(<span class="fu">here</span>(<span class="st">"output"</span>, .x)))</span>
<span id="cb89-60"><a href="#cb89-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-61"><a href="#cb89-61" aria-hidden="true" tabindex="-1"></a><span class="co"># 5) Reader with special handling for Q3 ("type" + "statement")</span></span>
<span id="cb89-62"><a href="#cb89-62" aria-hidden="true" tabindex="-1"></a>safe_read <span class="ot">&lt;-</span> <span class="cf">function</span>(fname) {</span>
<span id="cb89-63"><a href="#cb89-63" aria-hidden="true" tabindex="-1"></a>  path <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">"output"</span>, fname)</span>
<span id="cb89-64"><a href="#cb89-64" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(path, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb89-65"><a href="#cb89-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-66"><a href="#cb89-66" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="st">"statement"</span> <span class="sc">%in%</span> <span class="fu">names</span>(df)) {</span>
<span id="cb89-67"><a href="#cb89-67" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="st">"type"</span> <span class="sc">%in%</span> <span class="fu">names</span>(df)) {</span>
<span id="cb89-68"><a href="#cb89-68" aria-hidden="true" tabindex="-1"></a>      df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb89-69"><a href="#cb89-69" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">statement =</span> <span class="fu">paste0</span>(type, <span class="st">": "</span>, statement)) <span class="sc">%&gt;%</span></span>
<span id="cb89-70"><a href="#cb89-70" aria-hidden="true" tabindex="-1"></a>        <span class="fu">select</span>(statement)</span>
<span id="cb89-71"><a href="#cb89-71" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb89-72"><a href="#cb89-72" aria-hidden="true" tabindex="-1"></a>      df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">select</span>(statement)</span>
<span id="cb89-73"><a href="#cb89-73" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb89-74"><a href="#cb89-74" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb89-75"><a href="#cb89-75" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">tibble</span>())</span>
<span id="cb89-76"><a href="#cb89-76" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb89-77"><a href="#cb89-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-78"><a href="#cb89-78" aria-hidden="true" tabindex="-1"></a>  qnum <span class="ot">&lt;-</span> q_map[[fname]]</span>
<span id="cb89-79"><a href="#cb89-79" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb89-80"><a href="#cb89-80" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb89-81"><a href="#cb89-81" aria-hidden="true" tabindex="-1"></a>      <span class="at">source_file =</span> fname,</span>
<span id="cb89-82"><a href="#cb89-82" aria-hidden="true" tabindex="-1"></a>      <span class="at">question_number =</span> qnum,</span>
<span id="cb89-83"><a href="#cb89-83" aria-hidden="true" tabindex="-1"></a>      <span class="at">question_text =</span> q_text_map[[qnum]]</span>
<span id="cb89-84"><a href="#cb89-84" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb89-85"><a href="#cb89-85" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(question_number, question_text, source_file, statement)</span>
<span id="cb89-86"><a href="#cb89-86" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb89-87"><a href="#cb89-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-88"><a href="#cb89-88" aria-hidden="true" tabindex="-1"></a><span class="co"># 6) Bind, keep input order</span></span>
<span id="cb89-89"><a href="#cb89-89" aria-hidden="true" tabindex="-1"></a>all_insights_statements <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(insight_files, safe_read) <span class="sc">%&gt;%</span></span>
<span id="cb89-90"><a href="#cb89-90" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb89-91"><a href="#cb89-91" aria-hidden="true" tabindex="-1"></a>    <span class="at">question_number =</span> <span class="fu">factor</span>(</span>
<span id="cb89-92"><a href="#cb89-92" aria-hidden="true" tabindex="-1"></a>      question_number,</span>
<span id="cb89-93"><a href="#cb89-93" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">unique</span>(q_map[insight_files])  <span class="co"># preserve order</span></span>
<span id="cb89-94"><a href="#cb89-94" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb89-95"><a href="#cb89-95" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb89-96"><a href="#cb89-96" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(question_number)</span>
<span id="cb89-97"><a href="#cb89-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-98"><a href="#cb89-98" aria-hidden="true" tabindex="-1"></a><span class="co"># 7) Save</span></span>
<span id="cb89-99"><a href="#cb89-99" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_csv</span>(all_insights_statements, <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"all_insights_statements.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div></div>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p><a href="https://www.cdc.gov/nchs/hus/sources-definitions/geographic-region.htm" class="uri">https://www.cdc.gov/nchs/hus/sources-definitions/geographic-region.htm</a><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
     </main>
<!-- /main column -->  <script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>  </div> <!-- /content -->  <script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script> 
  
</body></html>